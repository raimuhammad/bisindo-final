var ur=Object.defineProperty,cr=Object.defineProperties;var hr=Object.getOwnPropertyDescriptors;var ot=Object.getOwnPropertySymbols;var xn=Object.prototype.hasOwnProperty,yn=Object.prototype.propertyIsEnumerable;var $t=(e,t,n)=>t in e?ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))xn.call(t,n)&&$t(e,n,t[n]);if(ot)for(var n of ot(t))yn.call(t,n)&&$t(e,n,t[n]);return e},x=(e,t)=>cr(e,hr(t));var F=(e,t)=>{var n={};for(var r in e)xn.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ot)for(var r of ot(e))t.indexOf(r)<0&&yn.call(e,r)&&(n[r]=e[r]);return n};var _=(e,t,n)=>($t(e,typeof t!="symbol"?t+"":t,n),n);import{r as u,j as i,u as at,A as K,m as U,R as pr,a as vn,M as gr,t as o,Q as q,w as L,b as D,h as qt,c as mr,d as fr,e as xr,f as _n,g as yr,o as Dt,i as me,k as R,l as vr,L as bn,n as _r,p as Ne,F as S,S as br,q as wr,s as Cr,V as Sr,v as wn,x as Re,y as Cn,z as Et,B as Ir,C as Qe,D as C,E as Q,G as h,H as Pr,I as p,J as ne,T as y,K as kr,P as Sn,N as Se,O as In,U as w,W as $r,X as H,Y as Oe,Z as qr,_ as zt,$ as Mt,a0 as fe,a1 as At,a2 as Pn,a3 as Ie,a4 as ie,a5 as kn,a6 as Y,a7 as Pe,a8 as Dr,a9 as B,aa as $n,ab as N,ac as T,ad as Tt,ae as Er,af as st,ag as dt,ah as qn,ai as zr,aj as We,ak as lt,al as Mr,am as Ar,an as ke,ao as Dn,ap as ut,aq as ct,ar as ht,as as En,at as pt,au as gt,av as Tr,aw as Vr,ax as Gr,ay as Lr,az as zn,aA as Fr,aB as Ur,aC as Hr,aD as Br,aE as Nr,aF as X,aG as Mn,aH as Rr,aI as Qr,aJ as Or,aK as Wr,aL as xe,aM as Jr,aN as jr,aO as Kr,aP as Yr,aQ as Vt,aR as An,aS as Xr,aT as Zr,aU as Tn,aV as mt,aW as eo,aX as Gt,aY as Je,aZ as Lt,a_ as Ft,a$ as to,b0 as Vn,b1 as no,b2 as Ut,b3 as io,b4 as re,b5 as ro,b6 as Gn,b7 as Ln,b8 as Fn,b9 as Un,ba as Ht,bb as oo,bc as Hn,bd as je,be as Bn,bf as Nn,bg as Rn,bh as Qn,bi as On,bj as ao,bk as Bt,bl as Wn,bm as Jn,bn as so,bo as lo,bp as uo,bq as co,br as ho,bs as po,bt as go,bu as mo,bv as fo,bw as xo,bx as yo,by as vo,bz as _o}from"./vendor.js";const bo=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}};bo();const jn=u.exports.createContext(null);function oe(){return u.exports.useContext(jn)}class wo extends u.exports.Component{constructor(t){super(t);_(this,"setUser",t=>{this.setState(n=>x(g({},n),{user:t,routes:[...this.props.getRoutes(t)]}))});_(this,"getContext",()=>x(g({},this.state),{setUser:this.setUser}));this.state={routes:[],user:null,initilizing:!0}}componentDidMount(){const{authFunctions:t,getRoutes:n}=this.props;t().then(r=>{this.setState({initilizing:!1,routes:n(r),user:r})})}render(){return i(jn.Provider,{value:this.getContext(),children:this.state.initilizing?"Initializing":this.props.children})}}const Kn=({children:e})=>{const{pathname:t}=at();return i(K,{exitBeforeEnter:!0,children:i(U.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{opacity:{type:"tween"}},style:{minHeight:"100vh"},children:e},t)})},Co=({getFallback:e})=>{const{routes:t,user:n}=oe(),r=e(n);if(!t.find(s=>s.path.replaceAll("/*","")===r))throw new Error(`Path ${r} is not exist in routes`);return i(pr,{children:t.map(({path:s,component:d,groups:l})=>{const c=l!=null?l:[];return i(vn,{path:s,element:i(Kn,{children:i(d,{})}),children:c.map(({path:m,component:f})=>i(vn,{path:m,element:i(Kn,{children:i(f,{})})},m))},s)})})},E=gr;var ye;(function(e){e.ADMIN="ADMIN",e.STUDENT="STUDENT"})(ye||(ye={}));const So=o.enumeration("AppRole",["ADMIN","STUDENT"]),Io=E.named("User").props({__typename:o.optional(o.literal("User"),"User"),id:o.identifier,name:o.union(o.undefined,o.string),email:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),role:o.union(o.undefined,So),need_change_password:o.union(o.undefined,o.boolean),active:o.union(o.undefined,o.null,o.boolean)}).views(e=>({get store(){return e.__getStore()}}));class O extends q{get id(){return this.__attr("id")}get name(){return this.__attr("name")}get email(){return this.__attr("email")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get role(){return this.__attr("role")}get need_change_password(){return this.__attr("need_change_password")}get active(){return this.__attr("active")}}function Po(){return new O}const ve=Po().name.email.created_at.updated_at.role.need_change_password.active,$e=Io.actions(e=>({log(){console.log(JSON.stringify(e))}})),ko=L()(E.named("Progress").props({__typename:o.optional(o.literal("Progress"),"Progress"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>$e))),video_histories:o.union(o.undefined,o.string),quiz_histories:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class ce extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get video_histories(){return this.__attr("video_histories")}get quiz_histories(){return this.__attr("quiz_histories")}user(t){return this.__child("user",O,t)}}function $o(){return new ce}const Ke=$o().user_id.video_histories.quiz_histories,ft=ko.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get videoHistories(){return e.video_histories?JSON.parse(e.video_histories):[]},get quizHistories(){return e.quiz_histories?JSON.parse(e.quiz_histories):[]}})),qo=L()(E.named("StudentGrade").props({__typename:o.optional(o.literal("StudentGrade"),"StudentGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),student:o.union(o.undefined,o.null,D(o.late(()=>$e))),grade:o.union(o.undefined,o.null,D(o.late(()=>Ze))),progress:o.union(o.undefined,D(o.late(()=>ft)))}).views(e=>({get store(){return e.__getStore()}})));class Ye extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}student(t){return this.__child("student",O,t)}grade(t){return this.__child("grade",he,t)}progress(t){return this.__child("progress",ce,t)}}function Do(){return new Ye}const Yn=Do().created_at.updated_at,xt=qo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get studentName(){return e.student?e.student.name:""},get gradeName(){return e.grade?e.grade.name:""}})),Eo=L()(E.named("Grade").props({__typename:o.optional(o.literal("Grade"),"Grade"),id:o.identifier,student_count:o.union(o.undefined,o.integer),video_count:o.union(o.undefined,o.integer),name:o.union(o.undefined,o.string),students:o.union(o.undefined,o.array(D(o.late(()=>xt)))),videos:o.union(o.undefined,o.array(D(o.late(()=>vt)))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class he extends q{get id(){return this.__attr("id")}get student_count(){return this.__attr("student_count")}get video_count(){return this.__attr("video_count")}get name(){return this.__attr("name")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}students(t){return this.__child("students",Ye,t)}videos(t){return this.__child("videos",Z,t)}}function zo(){return new he}const Xe=zo().student_count.video_count.name.created_at.updated_at,Ze=Eo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Mo=E.named("MultipleChoise").props({__typename:o.optional(o.literal("MultipleChoise"),"MultipleChoise"),id:o.identifier,image:o.union(o.undefined,o.string),text:o.union(o.undefined,o.string),index:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Xn extends q{get id(){return this.__attr("id")}get image(){return this.__attr("image")}get text(){return this.__attr("text")}get index(){return this.__attr("index")}}function Ao(){return new Xn}Ao().image.text.index;const Nt=Mo.actions(e=>({log(){console.log(JSON.stringify(e))}}));var V;(function(e){e.IMAGE_MATCH="IMAGE_MATCH",e.LETTER_SEQUENCE="LETTER_SEQUENCE",e.MULTIPLE_CHOICE="MULTIPLE_CHOICE"})(V||(V={}));const To=o.enumeration("QuizType",["IMAGE_MATCH","LETTER_SEQUENCE","MULTIPLE_CHOICE"]),Vo=L()(E.named("Quiz").props({__typename:o.optional(o.literal("Quiz"),"Quiz"),id:o.identifier,video_id:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),show_at:o.union(o.undefined,o.number),type:o.union(o.undefined,To),choises:o.union(o.undefined,o.array(D(o.late(()=>Nt)))),question:o.union(o.undefined,o.string),questionAnswer:o.union(o.undefined,o.integer),additional_image:o.union(o.undefined,o.string),image_matcher:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}})));class ae extends q{get id(){return this.__attr("id")}get video_id(){return this.__attr("video_id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get show_at(){return this.__attr("show_at")}get type(){return this.__attr("type")}get question(){return this.__attr("question")}get questionAnswer(){return this.__attr("questionAnswer")}get additional_image(){return this.__attr("additional_image")}get image_matcher(){return this.__attr("image_matcher")}choises(t){return this.__child("choises",Xn,t)}}function Go(){return new ae}const qe=Go().video_id.created_at.updated_at.show_at.type.question.questionAnswer.additional_image.image_matcher;qt.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){if(e===12&&(e=0),t==="pagi")return e;if(t==="siang")return e>=11?e:e+12;if(t==="sore"||t==="malam")return e+12},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:0,doy:6}});function Lo(e){var n;const t=qt((n=e.createdAt)!=null?n:e.created_at).locale("id");return{get isMoreThan3Days(){return qt(new Date).diff(t,"days")>3},get hummanize(){return e.isMoreThan3Days?t.format("LL"):t.fromNow()},get createdMoment(){return t}}}function Fo(e){let t=e,n=0;for(;t>=60;)n+=1,t-=60;const r=e%60;return{minute:n,modulo:r}}function et(e){const{minute:t,modulo:n}=Fo(e),r=t<10?`0${t}`:`${t}`,a=n<10?`0${n}`:`${n}`;return`${r}:${a}`}const Uo={MULTIPLE_CHOICE:"Pilihan ganda",IMAGE_MATCH:"Pencocokan gambar",LETTER_SEQUENCE:"Urut gambar"},yt=Vo.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get typeLabel(){return Uo[e.type]}})).views(Lo).views(e=>({get durationText(){var t;return et((t=e.show_at)!=null?t:0)}})),Ho=L()(E.named("Video").props({__typename:o.optional(o.literal("Video"),"Video"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),title:o.union(o.undefined,o.string),caption:o.union(o.undefined,o.string),description:o.union(o.undefined,o.string),content:o.union(o.undefined,o.string),thumbnail:o.union(o.undefined,o.string),duration:o.union(o.undefined,o.integer),grades:o.union(o.undefined,o.array(D(o.late(()=>Ze)))),quizes:o.union(o.undefined,o.array(D(o.late(()=>yt)))),student_progress:o.union(o.undefined,o.array(D(o.late(()=>ft)))),quiz_count:o.union(o.undefined,o.integer),order:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}})));class Z extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get title(){return this.__attr("title")}get caption(){return this.__attr("caption")}get description(){return this.__attr("description")}get content(){return this.__attr("content")}get thumbnail(){return this.__attr("thumbnail")}get duration(){return this.__attr("duration")}get quiz_count(){return this.__attr("quiz_count")}get order(){return this.__attr("order")}grades(t){return this.__child("grades",he,t)}quizes(t){return this.__child("quizes",ae,t)}student_progress(t){return this.__child("student_progress",ce,t)}}function Bo(){return new Z}const _e=Bo().created_at.updated_at.title.caption.description.content.thumbnail.duration.quiz_count.order,vt=Ho.actions(e=>({log(){console.log(JSON.stringify(e))}})).views(e=>({get durationText(){var t;return et((t=e.duration)!=null?t:0)}})),No=E.named("QuizAnswer").props({__typename:o.optional(o.literal("QuizAnswer"),"QuizAnswer"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),user_id:o.union(o.undefined,o.string),quiz_id:o.union(o.undefined,o.string),to:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),from:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),items:o.union(o.undefined,o.null,o.array(o.union(o.null,o.string))),selected:o.union(o.undefined,o.null,o.string)}).views(e=>({get store(){return e.__getStore()}}));class Rt extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get user_id(){return this.__attr("user_id")}get quiz_id(){return this.__attr("quiz_id")}get to(){return this.__attr("to")}get from(){return this.__attr("from")}get items(){return this.__attr("items")}get selected(){return this.__attr("selected")}}function Ro(){return new Rt}const Zn=Ro().created_at.updated_at.user_id.quiz_id.to.from.items.selected,ei=No.actions(e=>({log(){console.log(JSON.stringify(e))}})),Qo=E.named("PaginatorInfo").props({__typename:o.optional(o.literal("PaginatorInfo"),"PaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),hasMorePages:o.union(o.undefined,o.boolean),lastItem:o.union(o.undefined,o.null,o.integer),lastPage:o.union(o.undefined,o.integer),perPage:o.union(o.undefined,o.integer),total:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class be extends q{get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get hasMorePages(){return this.__attr("hasMorePages")}get lastItem(){return this.__attr("lastItem")}get lastPage(){return this.__attr("lastPage")}get perPage(){return this.__attr("perPage")}get total(){return this.__attr("total")}}function Oo(){return new be}Oo().count.currentPage.firstItem.hasMorePages.lastItem.lastPage.perPage.total;const De=Qo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Wo=L()(E.named("VideoPaginator").props({__typename:o.optional(o.literal("VideoPaginator"),"VideoPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>De)),data:o.union(o.undefined,o.array(D(o.late(()=>vt))))}).views(e=>({get store(){return e.__getStore()}})));class ti extends q{paginatorInfo(t){return this.__child("paginatorInfo",be,t)}data(t){return this.__child("data",Z,t)}}function Jo(){return new ti}const jo=Jo(),Ko=Wo.actions(e=>({log(){console.log(JSON.stringify(e))}})),Yo=L()(E.named("QuizPaginator").props({__typename:o.optional(o.literal("QuizPaginator"),"QuizPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>De)),data:o.union(o.undefined,o.array(D(o.late(()=>yt))))}).views(e=>({get store(){return e.__getStore()}})));class ni extends q{paginatorInfo(t){return this.__child("paginatorInfo",be,t)}data(t){return this.__child("data",ae,t)}}function Xo(){return new ni}const Zo=Xo(),ea=Yo.actions(e=>({log(){console.log(JSON.stringify(e))}})),ta=L()(E.named("StudentGradePaginator").props({__typename:o.optional(o.literal("StudentGradePaginator"),"StudentGradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>De)),data:o.union(o.undefined,o.array(D(o.late(()=>xt))))}).views(e=>({get store(){return e.__getStore()}})));class _t extends q{paginatorInfo(t){return this.__child("paginatorInfo",be,t)}data(t){return this.__child("data",Ye,t)}}function na(){return new _t}const Qt=na(),ia=ta.actions(e=>({log(){console.log(JSON.stringify(e))}})),ra=L()(E.named("GradePaginator").props({__typename:o.optional(o.literal("GradePaginator"),"GradePaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>De)),data:o.union(o.undefined,o.array(D(o.late(()=>Ze))))}).views(e=>({get store(){return e.__getStore()}})));class ii extends q{paginatorInfo(t){return this.__child("paginatorInfo",be,t)}data(t){return this.__child("data",he,t)}}function oa(){return new ii}const aa=oa(),sa=ra.actions(e=>({log(){console.log(JSON.stringify(e))}})),da=L()(E.named("DiscussionReply").props({__typename:o.optional(o.literal("DiscussionReply"),"DiscussionReply"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>$e))),discussion:o.union(o.undefined,D(o.late(()=>bt))),content:o.union(o.undefined,o.string),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class tt extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",O,t)}discussion(t){return this.__child("discussion",Ee,t)}}function la(){return new tt}const Ot=la().user_id.content.created_at.updated_at,Wt=da.actions(e=>({log(){console.log(JSON.stringify(e))}})),ua=L()(E.named("Discussion").props({__typename:o.optional(o.literal("Discussion"),"Discussion"),id:o.identifier,user_id:o.union(o.undefined,o.string),user:o.union(o.undefined,D(o.late(()=>$e))),content:o.union(o.undefined,o.string),replies:o.union(o.undefined,o.array(o.union(o.null,D(o.late(()=>Wt))))),created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen())}).views(e=>({get store(){return e.__getStore()}})));class Ee extends q{get id(){return this.__attr("id")}get user_id(){return this.__attr("user_id")}get content(){return this.__attr("content")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}user(t){return this.__child("user",O,t)}replies(t){return this.__child("replies",tt,t)}}function ca(){return new Ee}const Jt=ca().user_id.content.created_at.updated_at,bt=ua.actions(e=>({log(){console.log(JSON.stringify(e))}})),ha=L()(E.named("DiscussionPaginator").props({__typename:o.optional(o.literal("DiscussionPaginator"),"DiscussionPaginator"),paginatorInfo:o.union(o.undefined,o.late(()=>De)),data:o.union(o.undefined,o.array(D(o.late(()=>bt))))}).views(e=>({get store(){return e.__getStore()}})));class ri extends q{paginatorInfo(t){return this.__child("paginatorInfo",be,t)}data(t){return this.__child("data",Ee,t)}}function pa(){return new ri}const ga=pa(),ma=ha.actions(e=>({log(){console.log(JSON.stringify(e))}})),fa=E.named("VideoGrade").props({__typename:o.optional(o.literal("VideoGrade"),"VideoGrade"),id:o.identifier,created_at:o.union(o.undefined,o.frozen()),updated_at:o.union(o.undefined,o.null,o.frozen()),video_id:o.union(o.undefined,o.string),grade_id:o.union(o.undefined,o.string)}).views(e=>({get store(){return e.__getStore()}}));class oi extends q{get id(){return this.__attr("id")}get created_at(){return this.__attr("created_at")}get updated_at(){return this.__attr("updated_at")}get video_id(){return this.__attr("video_id")}get grade_id(){return this.__attr("grade_id")}}function xa(){return new oi}const ya=xa().created_at.updated_at.video_id.grade_id,ai=fa.actions(e=>({log(){console.log(JSON.stringify(e))}}));var si;(function(e){e.ASC="ASC",e.DESC="DESC"})(si||(si={}));o.enumeration("SortOrder",["ASC","DESC"]);const va=E.named("SimplePaginatorInfo").props({__typename:o.optional(o.literal("SimplePaginatorInfo"),"SimplePaginatorInfo"),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),firstItem:o.union(o.undefined,o.null,o.integer),lastItem:o.union(o.undefined,o.null,o.integer),perPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class _a extends q{get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get firstItem(){return this.__attr("firstItem")}get lastItem(){return this.__attr("lastItem")}get perPage(){return this.__attr("perPage")}}function ba(){return new _a}ba().count.currentPage.firstItem.lastItem.perPage;const wa=va.actions(e=>({log(){console.log(JSON.stringify(e))}})),Ca=E.named("PageInfo").props({__typename:o.optional(o.literal("PageInfo"),"PageInfo"),hasNextPage:o.union(o.undefined,o.boolean),hasPreviousPage:o.union(o.undefined,o.boolean),startCursor:o.union(o.undefined,o.null,o.string),endCursor:o.union(o.undefined,o.null,o.string),total:o.union(o.undefined,o.integer),count:o.union(o.undefined,o.integer),currentPage:o.union(o.undefined,o.integer),lastPage:o.union(o.undefined,o.integer)}).views(e=>({get store(){return e.__getStore()}}));class Sa extends q{get hasNextPage(){return this.__attr("hasNextPage")}get hasPreviousPage(){return this.__attr("hasPreviousPage")}get startCursor(){return this.__attr("startCursor")}get endCursor(){return this.__attr("endCursor")}get total(){return this.__attr("total")}get count(){return this.__attr("count")}get currentPage(){return this.__attr("currentPage")}get lastPage(){return this.__attr("lastPage")}}function Ia(){return new Sa}Ia().hasNextPage.hasPreviousPage.startCursor.endCursor.total.count.currentPage.lastPage;const Pa=Ca.actions(e=>({log(){console.log(JSON.stringify(e))}}));var di;(function(e){e.ONLY="ONLY",e.WITH="WITH",e.WITHOUT="WITHOUT"})(di||(di={}));o.enumeration("Trashed",["ONLY","WITH","WITHOUT"]);var se;(function(e){e.queryAuth="queryAuth",e.queryVideo="queryVideo",e.queryGetVideoByGrade="queryGetVideoByGrade",e.queryVideoNotInGrade="queryVideoNotInGrade",e.queryQuizAnswers="queryQuizAnswers",e.queryIsUniqueEmail="queryIsUniqueEmail",e.queryUserByGrade="queryUserByGrade",e.queryVideoByGrade="queryVideoByGrade",e.queryQuizByGrade="queryQuizByGrade",e.queryProgressByGrade="queryProgressByGrade",e.queryGradeAll="queryGradeAll",e.queryGradeById="queryGradeById",e.queryGradeQuizes="queryGradeQuizes",e.queryProgress="queryProgress",e.queryGradeByAuth="queryGradeByAuth",e.queryStudentGradeAll="queryStudentGradeAll",e.queryStudentProgress="queryStudentProgress",e.queryVideos="queryVideos",e.queryQuizes="queryQuizes",e.queryStudents="queryStudents",e.queryGrades="queryGrades",e.queryGetStudentByGrade="queryGetStudentByGrade",e.queryStudentGrades="queryStudentGrades",e.queryDiscussion="queryDiscussion"})(se||(se={}));var P;(function(e){e.mutateLogin="mutateLogin",e.mutateLogout="mutateLogout",e.mutateVideo="mutateVideo",e.mutateVideoUpdate="mutateVideoUpdate",e.mutateVideoDelete="mutateVideoDelete",e.mutateQuizDelete="mutateQuizDelete",e.mutateMultipleChoiseQuiz="mutateMultipleChoiseQuiz",e.mutateImageMatchQuiz="mutateImageMatchQuiz",e.mutateLetterSequenceQuiz="mutateLetterSequenceQuiz",e.mutateQuizAnswer="mutateQuizAnswer",e.mutateUser="mutateUser",e.mutateLoginWithInvitation="mutateLoginWithInvitation",e.mutateUserChangeUserPassword="mutateUserChangeUserPassword",e.mutateSentInvitation="mutateSentInvitation",e.mutateUserEdit="mutateUserEdit",e.mutateUserActivation="mutateUserActivation",e.mutateUserDelete="mutateUserDelete",e.mutateGrade="mutateGrade",e.mutateGradeEdit="mutateGradeEdit",e.mutateAddVideoInGrade="mutateAddVideoInGrade",e.mutateUpdateVideoProgress="mutateUpdateVideoProgress",e.mutateUpdateQuizProgress="mutateUpdateQuizProgress",e.mutateDiscussion="mutateDiscussion",e.mutateDiscussionReply="mutateDiscussionReply",e.mutateUpdateDiscussion="mutateUpdateDiscussion",e.mutateUpdateDiscussionReply="mutateUpdateDiscussionReply",e.mutateDeleteDiscussion="mutateDeleteDiscussion",e.mutateDeleteDiscussionReply="mutateDeleteDiscussionReply"})(P||(P={}));const ka=L()(mr.named("RootStore").extend(fr([["User",()=>$e],["Video",()=>vt],["Grade",()=>Ze],["StudentGrade",()=>xt],["Progress",()=>ft],["Quiz",()=>yt],["MultipleChoise",()=>Nt],["QuizAnswer",()=>ei],["VideoPaginator",()=>Ko],["PaginatorInfo",()=>De],["QuizPaginator",()=>ea],["StudentGradePaginator",()=>ia],["GradePaginator",()=>sa],["DiscussionPaginator",()=>ma],["Discussion",()=>bt],["DiscussionReply",()=>Wt],["VideoGrade",()=>ai],["SimplePaginatorInfo",()=>wa],["PageInfo",()=>Pa]],["User","Video","Grade","StudentGrade","Progress","Quiz","MultipleChoise","QuizAnswer","Discussion","DiscussionReply","VideoGrade"],"js")).props({users:o.optional(o.map(o.late(()=>$e)),{}),videos:o.optional(o.map(o.late(()=>vt)),{}),grades:o.optional(o.map(o.late(()=>Ze)),{}),studentGrades:o.optional(o.map(o.late(()=>xt)),{}),progresses:o.optional(o.map(o.late(()=>ft)),{}),quizzes:o.optional(o.map(o.late(()=>yt)),{}),multipleChoises:o.optional(o.map(o.late(()=>Nt)),{}),quizAnswers:o.optional(o.map(o.late(()=>ei)),{}),discussions:o.optional(o.map(o.late(()=>bt)),{}),discussionReplies:o.optional(o.map(o.late(()=>Wt)),{}),videoGrades:o.optional(o.map(o.late(()=>ai)),{})}).actions(e=>({queryAuth(t,n=ve.toString(),r={}){return e.query(`query auth { auth {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},queryVideo(t,n=_e.toString(),r={}){return e.query(`query video($id: ID!) { video(id: $id) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryGetVideoByGrade(t,n=_e.toString(),r={}){return e.query(`query getVideoByGrade($gradeId: ID!) { getVideoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryVideoNotInGrade(t,n=_e.toString(),r={}){return e.query(`query videoNotInGrade($id: ID!) { videoNotInGrade(id: $id) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryQuizAnswers(t,n=Zn.toString(),r={}){return e.query(`query quizAnswers { quizAnswers {
        ${typeof n=="function"?n(new Rt).toString():n}
      } }`,t,r)},queryIsUniqueEmail(t,n={}){return e.query("query isUniqueEmail($email: String!) { isUniqueEmail(email: $email) }",t,n)},queryUserByGrade(t,n=ve.toString(),r={}){return e.query(`query userByGrade($gradeId: ID!) { userByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},queryVideoByGrade(t,n=_e.toString(),r={}){return e.query(`query videoByGrade($gradeId: ID!) { videoByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},queryQuizByGrade(t,n=qe.toString(),r={}){return e.query(`query quizByGrade($gradeId: ID!) { quizByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},queryProgressByGrade(t,n=Ke.toString(),r={}){return e.query(`query progressByGrade($gradeId: ID!) { progressByGrade(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeAll(t,n=Xe.toString(),r={}){return e.query(`query gradeAll { gradeAll {
        ${typeof n=="function"?n(new he).toString():n}
      } }`,t,r)},queryGradeById(t,n=Xe.toString(),r={}){return e.query(`query gradeById($id: ID!) { gradeById(id: $id) {
        ${typeof n=="function"?n(new he).toString():n}
      } }`,t,r)},queryGradeQuizes(t,n=qe.toString(),r={}){return e.query(`query gradeQuizes($gradeId: ID!) { gradeQuizes(grade_id: $gradeId) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},queryProgress(t,n=Ke.toString(),r={}){return e.query(`query progress { progress {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryGradeByAuth(t,n=Yn.toString(),r={}){return e.query(`query gradeByAuth { gradeByAuth {
        ${typeof n=="function"?n(new Ye).toString():n}
      } }`,t,r)},queryStudentGradeAll(t,n=Yn.toString(),r={}){return e.query(`query studentGradeAll($gradeId: ID!) { studentGradeAll(gradeId: $gradeId) {
        ${typeof n=="function"?n(new Ye).toString():n}
      } }`,t,r)},queryStudentProgress(t,n=Ke.toString(),r={}){return e.query(`query studentProgress($userId: ID!) { studentProgress(user_id: $userId) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},queryVideos(t,n=jo.toString(),r={}){return e.query(`query videos($gradeId: ID, $search: String, $first: Int, $page: Int) { videos(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new ti).toString():n}
      } }`,t,r)},queryQuizes(t,n=Zo.toString(),r={}){return e.query(`query quizes($videoId: String!, $first: Int, $page: Int) { quizes(videoId: $videoId, first: $first, page: $page) {
        ${typeof n=="function"?n(new ni).toString():n}
      } }`,t,r)},queryStudents(t,n=Qt.toString(),r={}){return e.query(`query students($search: String, $gradeId: String, $first: Int, $page: Int) { students(search: $search, grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new _t).toString():n}
      } }`,t,r)},queryGrades(t,n=aa.toString(),r={}){return e.query(`query grades($search: String, $first: Int, $page: Int) { grades(search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new ii).toString():n}
      } }`,t,r)},queryGetStudentByGrade(t,n=Qt.toString(),r={}){return e.query(`query getStudentByGrade($gradeId: ID!, $first: Int, $page: Int) { getStudentByGrade(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new _t).toString():n}
      } }`,t,r)},queryStudentGrades(t,n=Qt.toString(),r={}){return e.query(`query studentGrades($gradeId: String, $search: String, $first: Int, $page: Int) { studentGrades(grade_id: $gradeId, search: $search, first: $first, page: $page) {
        ${typeof n=="function"?n(new _t).toString():n}
      } }`,t,r)},queryDiscussion(t,n=ga.toString(),r={}){return e.query(`query discussion($gradeId: ID!, $first: Int, $page: Int) { discussion(grade_id: $gradeId, first: $first, page: $page) {
        ${typeof n=="function"?n(new ri).toString():n}
      } }`,t,r)},mutateLogin(t,n){return e.mutate("mutation login($email: String!, $password: String!) { login(email: $email, password: $password) }",t,n)},mutateLogout(t,n){return e.mutate("mutation logout { logout }",t,n)},mutateVideo(t,n=_e.toString(),r){return e.mutate(`mutation video($gradeId: String!, $title: String!, $caption: String!, $description: String!, $content: Upload!) { video(grade_id: $gradeId, title: $title, caption: $caption, description: $description, content: $content) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateVideoUpdate(t,n=_e.toString(),r){return e.mutate(`mutation videoUpdate($id: ID!, $title: String!, $caption: String!, $description: String!) { videoUpdate(id: $id, title: $title, caption: $caption, description: $description) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateVideoDelete(t,n=_e.toString(),r){return e.mutate(`mutation videoDelete($id: ID!) { videoDelete(id: $id) {
        ${typeof n=="function"?n(new Z).toString():n}
      } }`,t,r)},mutateQuizDelete(t,n=qe.toString(),r){return e.mutate(`mutation quizDelete($id: ID!) { quizDelete(id: $id) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateMultipleChoiseQuiz(t,n=qe.toString(),r){return e.mutate(`mutation multipleChoiseQuiz($videoId: String!, $showAt: Int!, $options: [MultipleChoiseInput!]!, $answer: Int!, $additionalFile: Upload, $question: String!) { multipleChoiseQuiz(video_id: $videoId, show_at: $showAt, options: $options, answer: $answer, additionalFile: $additionalFile, question: $question) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateImageMatchQuiz(t,n=qe.toString(),r){return e.mutate(`mutation imageMatchQuiz($videoId: String!, $showAt: Int!, $text: String!) { imageMatchQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateLetterSequenceQuiz(t,n=qe.toString(),r){return e.mutate(`mutation letterSequenceQuiz($videoId: String!, $showAt: Int!, $text: String!) { letterSequenceQuiz(video_id: $videoId, show_at: $showAt, text: $text) {
        ${typeof n=="function"?n(new ae).toString():n}
      } }`,t,r)},mutateQuizAnswer(t,n=Zn.toString(),r){return e.mutate(`mutation quizAnswer($args: CreateQuizAnswerInput!) { quizAnswer(args: $args) {
        ${typeof n=="function"?n(new Rt).toString():n}
      } }`,t,r)},mutateUser(t,n=ve.toString(),r){return e.mutate(`mutation user($args: CreateUserInput!) { user(args: $args) {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},mutateLoginWithInvitation(t,n){return e.mutate("mutation loginWithInvitation($invitation: String!, $password: String!) { loginWithInvitation(invitation: $invitation, password: $password) }",t,n)},mutateUserChangeUserPassword(t,n){return e.mutate("mutation userChangeUserPassword($password: String!, $passwordConfirmation: String!) { userChangeUserPassword(password: $password, password_confirmation: $passwordConfirmation) }",t,n)},mutateSentInvitation(t,n){return e.mutate("mutation sentInvitation($id: String!) { sentInvitation(id: $id) }",t,n)},mutateUserEdit(t,n=ve.toString(),r){return e.mutate(`mutation userEdit($id: String!, $name: String, $email: String) { userEdit(id: $id, name: $name, email: $email) {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},mutateUserActivation(t,n=ve.toString(),r){return e.mutate(`mutation userActivation($id: String!, $password: String!) { userActivation(id: $id, password: $password) {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},mutateUserDelete(t,n=ve.toString(),r){return e.mutate(`mutation userDelete($id: String!) { userDelete(id: $id) {
        ${typeof n=="function"?n(new O).toString():n}
      } }`,t,r)},mutateGrade(t,n=Xe.toString(),r){return e.mutate(`mutation grade($name: String!) { grade(name: $name) {
        ${typeof n=="function"?n(new he).toString():n}
      } }`,t,r)},mutateGradeEdit(t,n=Xe.toString(),r){return e.mutate(`mutation gradeEdit($id: ID!, $name: String) { gradeEdit(id: $id, name: $name) {
        ${typeof n=="function"?n(new he).toString():n}
      } }`,t,r)},mutateAddVideoInGrade(t,n=ya.toString(),r){return e.mutate(`mutation addVideoInGrade($videoId: ID!, $gradeId: ID!) { addVideoInGrade(video_id: $videoId, grade_id: $gradeId) {
        ${typeof n=="function"?n(new oi).toString():n}
      } }`,t,r)},mutateUpdateVideoProgress(t,n=Ke.toString(),r){return e.mutate(`mutation updateVideoProgress($videoId: ID!, $play: Float!) { updateVideoProgress(video_id: $videoId, play: $play) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateUpdateQuizProgress(t,n=Ke.toString(),r){return e.mutate(`mutation updateQuizProgress($quizId: ID!, $correct: Boolean!) { updateQuizProgress(quiz_id: $quizId, correct: $correct) {
        ${typeof n=="function"?n(new ce).toString():n}
      } }`,t,r)},mutateDiscussion(t,n=Jt.toString(),r){return e.mutate(`mutation discussion($gradeId: ID!, $userId: ID!, $content: String!) { discussion(grade_id: $gradeId, user_id: $userId, content: $content) {
        ${typeof n=="function"?n(new Ee).toString():n}
      } }`,t,r)},mutateDiscussionReply(t,n=Ot.toString(),r){return e.mutate(`mutation discussionReply($userId: ID!, $discussionId: ID!, $content: String!) { discussionReply(user_id: $userId, discussion_id: $discussionId, content: $content) {
        ${typeof n=="function"?n(new tt).toString():n}
      } }`,t,r)},mutateUpdateDiscussion(t,n=Jt.toString(),r){return e.mutate(`mutation updateDiscussion($id: ID!, $content: String!) { updateDiscussion(id: $id, content: $content) {
        ${typeof n=="function"?n(new Ee).toString():n}
      } }`,t,r)},mutateUpdateDiscussionReply(t,n=Ot.toString(),r){return e.mutate(`mutation updateDiscussionReply($id: ID!, $content: String!) { updateDiscussionReply(id: $id, content: $content) {
        ${typeof n=="function"?n(new tt).toString():n}
      } }`,t,r)},mutateDeleteDiscussion(t,n=Jt.toString(),r){return e.mutate(`mutation deleteDiscussion($id: ID!) { deleteDiscussion(id: $id) {
        ${typeof n=="function"?n(new Ee).toString():n}
      } }`,t,r)},mutateDeleteDiscussionReply(t,n=Ot.toString(),r){return e.mutate(`mutation deleteDiscussionReply($id: ID!) { deleteDiscussionReply(id: $id) {
        ${typeof n=="function"?n(new tt).toString():n}
      } }`,t,r)}}))),$a=ka.actions(e=>({log(){console.log(JSON.stringify(e))}})),li=xr(_n),M=yr(li,_n),qa=Dt(me({email:R().required().email(),password:R().required().min(6)})),Da=e=>[{name:"email",type:"email",label:"Masukan email anda",icon:vr},{name:"password",type:"password",label:"Password",icon:bn}].map(t=>x(g({},t),{disabled:e,fullWidth:!0})),ui=u.exports.createContext(null),jt=()=>u.exports.useContext(ui);function ci(){const e=jt();return u.exports.useCallback(async t=>{const n=await e.queryAuth();if(t&&n&&n.auth){const{auth:r}=n;return t({id:r.id,name:r.name,email:r.email,role:r.role})}if(n&&n.auth){const{auth:r}=n;return{name:r.name,email:r.email,role:r.role}}return null},[])}function Ea(e){const t=Ne({resolver:qa}),{setQuery:n,loading:r,data:a}=M(),s=a&&!a.login&&!r;u.exports.useEffect(()=>{a&&a.login&&e()},[a]);const d=t.handleSubmit(l=>n(c=>c.mutateLogin(l)));return{form:t,onSubmit:d,loading:r,isCredentialInvalid:s}}class za extends u.exports.Component{constructor(t){super(t);_(this,"rootStore");this.rootStore=$a.create(void 0,{gqlHttpClient:new _r.GraphQLClient(this.props.url,{credentials:"include"})})}render(){return i(li.Provider,{value:this.rootStore,children:i(ui.Provider,{value:this.rootStore,children:this.props.children})})}}const Ma="imandidikr@gmail.com",Aa="password";var Ta={email:Ma,password:Aa};function k(e=!1){const[t,n]=u.exports.useState(e),r=u.exports.useCallback(s=>()=>n(s),[]),a=u.exports.useCallback(()=>{n(!t)},[t]);return[t,{force:r,toggle:a,inline:n}]}const Va=()=>{const[e,{force:t}]=k(),{user:n,setUser:r}=oe(),a=ci(),s=jt(),d=u.exports.useCallback(()=>s.mutateLogin(Ta).then(({login:l})=>{if(l)return a(r)}),[]);return i(S,{children:i(br,{ariaLabel:"SpeedDial example",open:e,sx:{position:"fixed",bottom:"1rem",right:"1rem"},onMouseEnter:t(!0),onMouseLeave:t(!1),icon:i(wr,{}),children:i(Cr,{onClick:d,FabProps:{disabled:Boolean(n)},tooltipTitle:"Login",icon:i(Sr,{})})})})};function Ga(){const[e]=wn("admin-sidebar-open"),[t,n]=wn("admin-sidebar-open"),r=()=>n(!0),a=()=>n(!1),[s,d]=u.exports.useState(""),l=Re(),c=Cn(l.breakpoints.down("md"));return u.exports.useEffect(()=>{c&&e&&n(!1)},[e,c]),{title:s,setTitle:d,sidebaropen:Boolean(t),handleCloseDrawer:a,handleOpenDrawer:r}}const hi=u.exports.createContext(null),Kt=()=>u.exports.useContext(hi);function pi(){const e=Re();return Cn(e.breakpoints.down("sm"))}function ze(e){return Et(e).replaceAll("query","").replaceAll("mutate","").camelCase().value()}function Me({api:e,merge:t={},parser:n}){const{data:r,loading:a,error:s,setQuery:d}=M(),l=ze(e),c=m=>(n&&(m=g({},n(m))),d(f=>f[e](g(g({},m),t))));return[{loading:a,response:r?r[l]:null,error:s},c]}const La=240,Fa=Ir(Qe,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>g({zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},t&&{marginLeft:La,[e.breakpoints.down("sm")]:{marginLeft:0,width:"100%"},transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})})),Ua={paddingLeft:[0,0],paddingRight:[0,0],display:["block","flex"],color:"#2c3e50","& > .page-info":{paddingX:2,display:"flex",alignItems:"center"},"& > .search-bar":{borderRadius:1,display:"flex",bgcolor:"red",alignItems:"center",border:"solid 1px #f8f8f8",boxShadow:"inset 0 1px 2px #eee","& > .icon-container":{alignItems:"center",display:"flex",paddingX:2,background:"#f9f9f9",height:42}}},Ha=C(()=>{const{user:e}=oe(),t=pi(),[n,r]=u.exports.useState(null),[{loading:a,response:s},d]=Me({api:P.mutateLogout}),{setUser:l}=oe(),c=Q();u.exports.useEffect(()=>{s&&(c("/"),l(null))},[s]);const m=()=>{d({})},f=b=>{r(n?null:b.target)};if(!e)return i(S,{});const{name:v}=e;return h(S,{children:[i(Pr,{sx:{zIndex:100*100,color:"white"},open:a,children:h(p,{sx:{textAlign:"center"},children:[i(ne,{color:"inherit"}),i(y,{children:"Mengeluarkan akun anda"})]})}),i(kr,{PaperProps:{elevation:1,sx:{width:200}},onClose:()=>r(null),open:Boolean(n),anchorEl:n,children:i(Sn,{onClick:m,children:"Logout"})}),i(p,{sx:{marginLeft:"auto",position:["absolute","static"],top:0,right:0},children:t?i(Se,{onClick:f,children:i(In,{})}):i(w,{onClick:f,endIcon:i($r,{}),startIcon:i(In,{}),children:t?"":v})})]})}),gi=()=>i(S,{children:i(Fa,{sx:{borderLeft:"none",background:"white",color:"black"},variant:"outlined",elevation:0,position:"fixed",open:!1,children:i(H,{children:h(Oe,{sx:Ua,children:[i(p,{className:"page-info",children:h(p,{sx:{display:"flex",alignItems:"center",bgcolor:e=>e.palette.grey.A100,borderRadius:2},children:[i(qr,{sx:{flex:1,paddingLeft:2},placeholder:"Pencarian"}),i(zt,{sx:{mr:2}})]})}),i(Ha,{})]})})})}),mi=()=>{const{user:e}=oe();return e?i(p,{sx:{minHeight:"10vh",display:"flex",alignItems:"center",bgcolor:"primary.dark",color:"white",py:3},children:h(H,{children:[h(y,{sx:{fontWeight:"bolder"},variant:"h4",children:["Selamat datang, ",e.name]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:e.role})]})}):i(S,{})},fi=u.exports.createContext(null),pe=()=>u.exports.useContext(fi);class Ba extends u.exports.Component{constructor(t){super(t);_(this,"updateNav",t=>{this.setState({navs:[...t]})});_(this,"updateBackUrl",(t=null)=>{this.setState({backurl:t})});_(this,"getContextValue",()=>x(g({},this.state),{updateNavs:this.updateNav,updateBackUrl:this.updateBackUrl}));this.state={navs:[],backurl:null}}render(){return i(fi.Provider,{value:this.getContextValue(),children:this.props.children})}}const xi=()=>{const{navs:e,backurl:t}=pe(),n=Q(),{pathname:r}=at(),a=l=>{n(l)};console.log(r),u.exports.useEffect(()=>{document.body.scroll({top:0});const l=document.getElementById("root");l&&(l.scrollTo(0,0),window.scrollTo({top:0,behavior:"smooth"}))},[r]);const s=()=>{t&&n(t.url)},d=()=>{const l=e.findIndex(c=>c.path===r.replaceAll("%20"," "));return console.log(e),l===-1?0:l};return i(Qe,{component:U.div,animate:{height:e.length?"fit-content":0},sx:{overflow:"hidden"},position:"static",color:"transparent",elevation:0,variant:"outlined",children:h(H,{sx:{"& > *":{color:"white"},py:0,minHeight:"fit-content",display:"flex",alignItems:"center"},children:[i(Mt,{sx:{py:0},value:d(),children:e.map((l,c)=>i(fe,{onClick:()=>a(l.path),sx:{py:0,my:0,textTransform:"none",fontWeight:"bolder"},label:l.label,value:c},l.path))}),i(U.div,{style:{flex:1,marginLeft:"auto",width:"fit-content",textAlign:"right"},animate:{opacity:t?1:0},children:i(w,{onClick:s,startIcon:i(At,{}),sx:{textTransform:"none"},children:t==null?void 0:t.label})})]})})},Na=({children:e})=>{const t=Ga();return i(hi.Provider,{value:t,children:h(p,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(Pn,{}),i(gi,{}),h(p,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Oe,{}),i(mi,{}),i(xi,{}),e]})]})})},Ra=({children:e})=>i(S,{children:e});function Qa(){const{user:e}=oe(),{loading:t,data:n}=M(d=>{var l;return d.queryStudentProgress({userId:(l=e==null?void 0:e.id)!=null?l:""})}),r=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.videoHistories:[]},a=()=>{var d;return n&&((d=n.studentProgress)==null?void 0:d.videoHistories)?n.studentProgress.quizHistories:[]},s=d=>{const l=r().find(c=>c.video_id.toString()===d);return l?l.time:0};return{progress:n?n.studentProgress:null,loading:!n||t,videoHistory:r(),quizHistory:a(),getPlaying:s}}function Oa(){const{loading:e,data:t}=M(n=>n.queryGradeByAuth({},r=>r.id.grade(a=>a.id.name.video_count)));return{studentGrade:t?t.gradeByAuth:null,loading:!t||e}}function Wa({studentGrade:e}){const{data:t,loading:n,setQuery:r}=M(),a=t?t.getVideoByGrade:[],s=(d,l)=>{const c=a.find(f=>f.id===d);if(!c)return 0;const m=l/c.duration*100;return isFinite(m)?Math.floor(m):0};return u.exports.useEffect(()=>{e&&r(d=>d.queryGetVideoByGrade({gradeId:e.grade.id}))},[e]),{videos:a,loading:!t||n,getPlayingPercentage:s}}function Ja(){const e=Qa(),t=Oa(),n=Wa(t),r=[e.loading,t.loading,n.loading].find(Boolean);return{progressInfo:e,videoList:n,gradeInfo:t,isPageLoading:Boolean(r)}}const yi=u.exports.createContext(null);function W(){return u.exports.useContext(yi)}const Ae=()=>i(p,{sx:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%,-50%)",zIndex:100*100},children:i(ne,{size:150})}),ja=C(({children:e})=>{const t=Ja();return i(yi.Provider,{value:t,children:h(p,{sx:{background:"#f9f9f9",minHeight:"100vh"},children:[i(Pn,{}),i(gi,{}),h(p,{id:"main-component",component:"main",sx:{flexGrow:1,minHeight:"100vh"},children:[i(Oe,{}),i(mi,{}),i(xi,{}),t.isPageLoading?i(Ae,{}):e]})]})})});function Yt(e){const{updateNavs:t,navs:n}=pe();u.exports.useEffect(()=>{!e.length&&!n.length&&t([{label:"Dashboard",path:"/"},{label:"Diskusi",path:"/discussion"}])},[e])}const Ka={[ye.ADMIN]:Na,[ye.STUDENT]:ja,GUEST:Ra},Ya=e=>{const{user:t}=oe(),n=t?t.role:"GUEST",r=Ka[n];return i(r,g({},e))};class vi extends u.exports.Component{constructor(){super(...arguments);_(this,"getValue",()=>{const{type:t="text",select:n,controller:r}=this.props;switch(t){case"number":return 0;case"money":return 0;default:{if(n)return"__default__";if(r){const{value:a}=r.field;if(!(a instanceof File))return a!=null?a:""}return this.props.value?this.props.value:""}}});_(this,"handleChange",t=>{const n=t.target.value,{onChange:r}=this.props;r&&r(n),this.props.controller&&this.props.controller.field.onChange(n)})}propBuilder(){var c;const a=this.props,{controller:t}=a,n=F(a,["controller"]),r={onChange:this.handleChange,value:this.getValue()};if(t){const s=t,{field:d}=s,l=d,{ref:m}=l,f=F(l,["ref"]),{fieldState:v}=s;if(v.error){const{message:b}=v.error;r.helperText=b,r.error=!0}return r.onChange=b=>{f==null||f.onChange(b),this.handleChange(b)},x(g(g(g({},n),f),r),{inputRef:m,inputProps:g({},(c=n.inputProps)!=null?c:{})})}return g(g({},n),r)}render(){return i(kn,g({},this.propBuilder()))}}const A=n=>{var r=n,{noUseForm:e}=r,t=F(r,["noUseForm"]);const a=Ie();if(!a&&!e&&!t.onChange)throw new Error("Please provide onChange props if without use useForm");if(e)return i(vi,g({},t));const s=ie({name:t.name,control:a.control});return i(vi,g({controller:s},t))},Xa=({component:e,makeProps:t,getKey:n,data:r})=>i(S,{children:r.map(a=>{let s=n?n(a):a;typeof a=="object"&&"key"in a&&(s=a.key);const d=x(g({},t?t(a):a),{key:s});return i(e,g({},d))})});function Za(e){return u.exports.useCallback(()=>i(Xa,g({},e)),[e])}const es={display:{sm:"block",md:"flex"},bgcolor:"primary.main",height:"100vh",overflow:"hidden","& > .content":{display:"flex",alignItems:"center",justifyContent:"center",width:{sm:"100%",md:"50%"},height:"100%"}},ts=n=>{var r=n,{icon:e}=r,t=F(r,["icon"]);return i(p,{sx:{marginY:2,padding:2},children:i(A,x(g({},t),{InputProps:{endAdornment:i($n,{position:"end",children:i(e,{})})}}))})},ns=()=>{const e=ci(),{enqueueSnackbar:t}=B(),n=oe(),r=Q();return()=>{e().then(a=>{if(a){const{name:s}=a;t(`Selamat datang ${s}`),r(a.role===ye.ADMIN?"/classroom":"/"),n.setUser(a)}})}},is=C(()=>{const e=ns(),{isCredentialInvalid:t,form:n,onSubmit:r,loading:a}=Ea(e),s=Da(a),d=Za({getKey({name:l}){return l},component:ts,data:s});return i(Y,x(g({},n),{children:h("form",{onSubmit:r,children:[i(d,{}),h(p,{textAlign:"right",padding:2,children:[i(Pe,{in:t,timeout:"auto",children:i(y,{sx:{color:"error.light",marginY:2},variant:"subtitle2",children:"Kombinasi email & password salah"})}),i(w,{variant:"contained",size:"large",type:"submit",endIcon:a?i(ne,{sx:{color:"white"},size:15}):i(Dr,{}),children:"Masuk"})]})]})}))}),rs=()=>h(p,{component:"main",sx:es,children:[i("div",{className:"content",children:h(p,{sx:{color:"white"},children:[i(y,{variant:"h1",children:"Bisindo"}),i(y,{variant:"h5",children:"Selamat datang"}),i(y,{children:"Kami adalah platform kursus online untuk pembelajaran bahasa isyarat."})]})}),i("div",{className:"content",children:h(N,{sx:{padding:2,width:"80%",height:"60%",color:"#2c3e50"},children:[i(y,{align:"center",variant:"h5",sx:{fontWeight:"light"},children:"Login dengan email & password anda"}),i(T,{sx:{marginY:2}}),i(is,{})]})})]});function os(e){return e?{data:e.data,paginator:e.paginatorInfo}:{data:[],paginator:{perPage:10,currentPage:0,count:0,lastPage:0,lastItem:0,firstItem:0,hasMorePages:!1,total:0,__typename:"PaginatorInfo"}}}const as=(e,t)=>{const n=ze(e),{data:r,loading:a,setQuery:s}=M(),d=c=>s(m=>m[e](c,f=>f.data(t).paginatorInfo(new be().currentPage.hasMorePages.lastPage.perPage.count.total.lastItem.firstItem)));return{result:os(r&&r[n]?r[n]:null),fetch:d,loading:a,hasResponse:Boolean(r)}},ss=({include:e,callback:t})=>{const[n,r]=u.exports.useState(e);return{updateParameter:d=>l=>{const c=x(g({},n),{[d]:l});r(g({},c)),t(x(g({},c),{page:1,first:10}))},removeParam:d=>{let l={};r(c=>(delete c[d],l=c,g({},c))),t(x(g({},l),{page:1,first:10}))},parameter:n}},ds=({callback:e,paginator:t,merge:n})=>{const r=u.exports.useCallback((d,l)=>{e(x(g({},n),{page:d,first:l}))},[n]);return{go:r,next:()=>r(t.currentPage+1,10),prev:()=>r(t.currentPage+1,10)}};function ls({includeQuery:e,api:t,selector:n}){const{fetch:r,loading:a,result:s,hasResponse:d}=as(t,n),{parameter:l,updateParameter:c,removeParam:m}=ss({include:e,callback:r}),f=ds({callback:r,paginator:s.paginator,merge:l}),v=u.exports.useCallback(()=>{r(g({page:1,first:10},e))},[e]),b=d&&s.data.length===0;return{result:s,actions:x(g({},f),{updateParameter:c,parameter:l,removeParam:m}),loading:a,initialFetch:v,isEmpty:b,hasResponse:d}}function wt(e,t){return(n={})=>ls({includeQuery:n,api:e,selector:t})}const us={quizByVideo:wt(se.queryQuizes,e=>e.show_at.id.type.additional_image.question.questionAnswer.image_matcher.choises(t=>t.id.image.text.index)),grades:wt(se.queryGrades,Xe),students:wt(se.queryStudents,e=>e.id.student(ve).grade(t=>t.id.name)),discussion:wt(se.queryDiscussion,e=>e.id.content.created_at.user_id.user(t=>t.name.id).replies(t=>t.user_id.id.user(n=>n.name).content.user_id.created_at))},_i=u.exports.createContext(null);function G(){return u.exports.useContext(_i)}const Ct=C(({dataKey:e,includes:t={},children:n})=>{const r=us[e];if(!r)throw new Error(`Paginator for ${e} is not defined`);const a=r(t);return i(_i.Provider,{value:a,children:n})}),cs=["videos","student","editor","discussion"],hs=()=>{const[e,t]=u.exports.useState({selected:null,mobileControlTab:"list",tab:"videos"}),{selected:n,mobileControlTab:r}=e;pi();const a=u.exports.useCallback(c=>{t(m=>x(g({},m),{selected:c,mobileControlTab:"manage"}))},[r]),s=u.exports.useCallback(c=>{t(m=>x(g({},m),{tab:c}))},[]),d=u.exports.useCallback(c=>{t(m=>x(g({},m),{mobileControlTab:c}))},[]);u.exports.useEffect(()=>{n&&s("videos")},[n]);const l=u.exports.useCallback(c=>()=>a(c),[]);return{selected:n,tablist:cs,activeTab:e.tab,mobileControlTab:r,setMobileControlTab:d,setActiveTab:s,setModel:l}},bi=u.exports.createContext(null);function ps(){return u.exports.useContext(bi)}function gs({api:e,rule:t,parser:n,merge:r={}}){const a=Ne({resolver:Dt(t)}),s=ze(e),{data:d,store:l}=M(),[c,m]=u.exports.useState(!1),[f,v]=u.exports.useState(!1),[b,$]=u.exports.useState({response:null}),I=u.exports.useCallback(te=>{v(!1),$({response:null});const ue=n?n(g(g({},te),r)):g(g({},te),r);return m(!0),l[e](ue).currentPromise().then(Be=>{m(!1),Be&&Be[s]&&$({response:Be}),v(!1)}).catch(()=>{console.log("Error"),v(!0),m(!1)})},[e]),z=a.handleSubmit(I),ee=u.exports.useCallback(()=>{a.reset({})},[]),ge=u.exports.useCallback(te=>{Object.values(ue=>{a.setValue(ue,te[ue])})},[]);return{response:b.response,form:a,setFormValue:ge,reset:ee,loading:c,handler:z,error:f}}function J({api:e,rule:t}){return(n={},r)=>gs({api:e,rule:t,merge:n,parser:r})}const Xt=me({name:R().required()}),Zt={videos:{required:"Silahkan pilih video terlebih dahulu"},title:{required:"Silahkan isi judul video"},caption:{required:"Silahkan isi caption video"},description:{required:"Silahkan isi deskripsi video"}},ms=Tt().test("video",Zt.videos.required,e=>e&&e instanceof File),wi=Tt().test("description validator",Zt.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),fs=me({content:ms.required(Zt.videos.required),title:R().required(),caption:R().required(),description:wi.required()}),xs=me({title:R().required(),caption:R().required(),description:wi.required()}),Ci=me({email:R().required().email(),name:R().required()}),ys=me({password:R().required("Password wajib disi").min(6,"Minimal password  6 karakter"),passwordConfirmation:R().required("Silahkan konfirmasi password").oneOf([Er("password")],"Konfirmasi password salah")}),vs={description:{required:"Silahkan isi konten diskusi"}},_s=Tt().test("description validator",vs.description.required,e=>{try{return e.blocks.length===1?e.blocks[0].text!=="":e.blocks.length>0}catch{return!1}}),St=me({content:_s.required()}),bs={createBatch:J({api:P.mutateGrade,rule:Xt}),editBatch:J({api:P.mutateGrade,rule:Xt}),addVideo:J({api:P.mutateVideo,rule:fs}),addUser:J({api:P.mutateUser,rule:Ci}),addDiscussion:J({api:P.mutateDiscussion,rule:St}),editDiscussion:J({api:P.mutateUpdateDiscussion,rule:St}),addDiscussionReply:J({api:P.mutateDiscussionReply,rule:St}),editDiscussionReply:J({api:P.mutateUpdateDiscussionReply,rule:St}),editVideo:J({api:P.mutateVideoUpdate,rule:xs}),activation:J({api:P.mutateUserActivation,rule:ys}),editUser:J({api:P.mutateUserEdit,rule:Ci})},Si=u.exports.createContext(null);function we(){return u.exports.useContext(Si)}const Te=C(({mutateKey:e,merge:t={},parser:n,children:r})=>{const a=bs[e];if(!a)throw new Error(`Please implemented mutation ${e}`);const s=a(t,n);return i(Si.Provider,{value:s,children:r})}),ws=C(({onSuccess:e,model:t})=>{const{setFormValue:n,response:r,form:a,handler:s,loading:d}=we();return u.exports.useEffect(()=>{r&&e(r)},[r]),u.exports.useEffect(()=>{t&&n({name:t.name})},[t]),i(Y,x(g({},a),{children:h("form",{onSubmit:s,children:[i(A,{fullWidth:!0,name:"name",label:"Nama batch"}),i(w,{sx:{marginY:2},variant:"contained",size:"large",type:"submit",endIcon:d?i(ne,{sx:{color:"white"},size:15}):i(st,{}),children:"Simpan"})]})}))}),Cs={marginTop:2,textTransform:"none",mb:2},Ss=()=>{const[e,{toggle:t,inline:n}]=k(),{enqueueSnackbar:r}=B(),{initialFetch:a}=G();return h(S,{children:[i(w,{onClick:t,startIcon:e?i(dt,{}):i(qn,{}),sx:Cs,variant:"outlined",children:e?"Tutup":"Tambah batch baru"}),i(Pe,{in:e,sx:{mb:2},timeout:"auto",children:i(Te,{mutateKey:"createBatch",children:i(N,{sx:{padding:2,borderRadius:0},children:i(ws,{onSuccess:d=>{r(`${d.name} berhasil di tambahkan`,{variant:"success"}),n(!1),a()}})})})})]})},Is=()=>{const[e,t]=u.exports.useState(""),n=v=>t(v),{actions:{removeParam:r,parameter:a,updateParameter:s},result:d,loading:l,hasResponse:c}=G();return i(H,{children:h("form",{onSubmit:v=>{s("search")(`%${e}%`),v.preventDefault()},onReset:()=>{r("search"),t("")},children:[i(A,{fullWidth:!0,disabled:l,variant:"standard",InputProps:{startAdornment:i($n,{sx:{px:2},position:"start",children:i(zt,{})})},sx:{bgcolor:"white","& input":{py:2}},placeholder:"Masukan kata kunci pencarian",name:"search",onChange:n,value:e,noUseForm:!0,size:"medium"}),h(p,{sx:{p:1,display:"flex",justifyContent:"flex-end"},children:[i(p,{sx:{display:c?"block":"none"},children:i(y,{variant:"caption",children:d.paginator.total?`Hasil pencarian : ${d.paginator.total} item`:`Data tidak di temukan dengan kata kunci "${a.search}"`})}),h(p,{sx:{ml:"auto"},children:[i(w,{type:"submit",startIcon:i(zt,{}),disabled:l,children:"Cari"}),i(w,{type:"reset",startIcon:i(zr,{}),disabled:l||!e,children:"Reset"})]})]})]})})},Ii=({children:e,handleClose:t,open:n,isCloseDisabled:r})=>i(We,{open:n,PaperProps:{sx:{minWidth:["80vw","50vw"]}},onClose:r?void 0:t,children:i(lt,{children:e})}),j=a=>{var s=a,{loading:e,disabled:t,icon:n}=s,r=F(s,["loading","disabled","icon"]);return i(w,x(g({},r),{startIcon:e?i(ne,{size:20}):n,type:"submit",disabled:t||e}))};function Ve({message:e,show:t,variant:n,callback:r,autoShow:a}){const{enqueueSnackbar:s,closeSnackbar:d}=B(),l=()=>{const c=()=>typeof e=="function"?e():e;d(),s(c(),{variant:n})};return u.exports.useEffect(()=>(d(),()=>{d()}),[]),u.exports.useEffect(()=>{a&&t&&r&&r(),!a&&t&&(r&&r(),l())},[t,n]),l}function Ps(e=""){const t=Q();return{navigate:()=>{t(e)},to:a=>()=>t(a)}}const Pi=({icon:e,text:t})=>h(p,{sx:{display:"inline-flex",alignItems:"center",mr:2},children:[i(p,{sx:{mr:2},children:e}),i(y,{variant:"caption",children:t})]}),ks=C(({batch:e,onSelect:t})=>{const n=`/classroom/${Et(e.name).slugify().value()}/${e.id}/videos`,{navigate:r}=Ps(n);return h(N,{sx:{p:2,mx:[1,0],mb:2,display:["block","flex"]},children:[h(p,{sx:{width:["100%","80%"]},children:[i(y,{variant:"h4",sx:{textTransform:"capitalize"},children:e.name}),i(Pi,{text:`${e.student_count} siswa`,icon:i(Mr,{})}),i(Pi,{text:`${e.video_count} video`,icon:i(Ar,{})})]}),h(p,{sx:{width:["100%","20%"],"& >button":{mb:1}},children:[i(w,{onClick:r,size:"small",fullWidth:!0,variant:"outlined",children:"Manage"}),i(w,{onClick:t(e,"update"),size:"small",fullWidth:!0,variant:"outlined",children:"Ganti nama batch"}),i(w,{onClick:t(e,"delete"),size:"small",fullWidth:!0,variant:"outlined",children:"Hapus"})]})]})}),$s=C(({selected:e,action:t,handleClose:n})=>{const r=Ne({resolver:Dt(Xt)}),[{response:a,loading:s},d]=Me({api:P.mutateGradeEdit,merge:{id:e?e.id:""}}),l=r.handleSubmit(d),c=Ve({show:Boolean(a&&t==="update"),message:"Perubahan berhasil disimpan",variant:"success",autoShow:!1});return u.exports.useEffect(()=>{a&&(n(),c())},[a]),u.exports.useEffect(()=>{e&&r.setValue("name",e.name)},[e]),i(Ii,{handleClose:n,open:t==="update",isCloseDisabled:s,children:i(Y,x(g({},r),{children:h("form",{onSubmit:l,children:[i(y,{variant:"subtitle1",children:"Ganti nama batch"}),i(A,{fullWidth:!0,name:"name"}),i(j,{icon:i(st,{}),loading:s,children:"Simpan"})]})}))})}),qs=C(({selected:e,action:t,handleClose:n})=>{const[{response:r,loading:a},s]=Me({api:P.mutateGradeDelete,merge:{id:e?e.id:""}}),d=Ve({message:r?`${r.name} berhasil di hapus`:"",autoShow:!1,variant:"success",show:Boolean(r)}),{initialFetch:l}=G();return u.exports.useEffect(()=>{r&&(d(),l(),n())},[r]),h(Ii,{handleClose:n,open:t==="delete",isCloseDisabled:a,children:[h(y,{variant:"h5",children:["Apakah anda yakin untuk menghapus ",e?e.name:""," ?"]}),h(p,{sx:{pt:4,width:["100%","50%"],"& > button":{textTransform:"capitalize"}},children:[i(j,{onClick:()=>s({}),icon:i(ke,{}),loading:a,children:"Hapus"}),i(w,{variant:"outlined",disabled:a,onClick:n,children:"Batal"})]})]})}),Ds=C(()=>{const{result:{data:e}}=G(),[t,n]=u.exports.useState({selected:null,action:null}),{selected:r,action:a}=t,s=(l,c)=>()=>n({selected:l,action:c}),d=()=>{n({action:null,selected:r}),setTimeout(()=>{n({selected:null,action:null})},1e3)};return h(H,{children:[e.map(l=>i(ks,{batch:l,onSelect:s},l.id)),i($s,x(g({},t),{handleClose:d})),i(qs,x(g({},t),{handleClose:d}))]})}),Es=()=>{const{initialFetch:e,loading:t,isEmpty:n,hasResponse:r}=G();return ps(),u.exports.useEffect(()=>{e()},[]),h(S,{children:[i(H,{children:i(Ss,{})}),i(Is,{}),i(Ds,{})]})},zs=()=>{const{setTitle:e}=Kt(),{updateNavs:t}=pe();u.exports.useEffect(()=>(e("Menagemen batch"),t([]),()=>{e("")}),[]);const n=hs();return i(Ct,{dataKey:"grades",children:i(bi.Provider,{value:n,children:i(Es,{})})})},Ms=()=>i(zs,{}),As=C(e=>{const{updateBackUrl:t}=pe();return u.exports.useEffect(()=>(t({url:"classroom",label:"kembali ke ruang kelas"}),()=>t(null)),[]),i(H,{children:i(Dn,{})})}),Ts=C(e=>{const t=at(),{updateBackUrl:n}=pe();return u.exports.useEffect(()=>{t.state&&t.state.backurl&&n(t.state.backurl)},[t]),i(H,{children:i(Dn,{})})});function Vs(e,t,n){const r=ze(e),{data:a,setQuery:s,loading:d}=M(),l=()=>{s(f=>f[e](t,n))};u.exports.useEffect(()=>{l()},[]);const c=()=>a?a[r]:[],m=()=>{if(d)return!1;const f=a&&a[r];return f?f.length===0:!1};return{data:c(),isEmpty:m(),loading:d,fetch:l,hasResponse:Boolean(a)}}function ki(e){return(t,n)=>Vs(e,t,n)}const Gs=ki(se.queryVideoByGrade),Ls={videoByGrade:Gs,studentByGrade:ki(se.queryStudentGradeAll)},$i=u.exports.createContext(null);function en(){return u.exports.useContext($i)}const qi=C(({dataKey:e,props:t={},children:n,selector:r})=>{const a=Ls[e](t,r);return i($i.Provider,{value:a,children:n})});function Fs({api:e,provider:t,id:n}){const r=ze(e),a=b=>b[e]({id:n}),{loading:s,error:d,setQuery:l,data:c}=M(a),m=()=>l(a),f={refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])};return x(g({},(()=>t?t(f):{})()),{refreshModel:m,pageLoading:s,error:Boolean(d),modelId:n,model:c?c[r]:null,hasResponse:Boolean(c&&c[r])})}const Us=e=>{const[t,n]=u.exports.useState({page:e[0],animate:"opacity",animateDirection:"left"});return[t,a=>{const s=e.findIndex(c=>c===a),d=e.findIndex(c=>c===t.page),l=s>d?"left":"right";n({page:a,animateDirection:l,animate:"x"})}]},It=["VIDEOS","ADD-VIDEO","STUDENTS","QUIZ-CHECK","DISCUSSION"];function Hs(){Us(It),Q();const{pathname:e}=at(),[t,n]=u.exports.useState("Videos"),[r,a]=u.exports.useState({animate:"x",animateDirection:"left"});ut(),u.exports.useEffect(()=>{let d=e.split("/").pop();if(d==="batch"&&(d="videos"),d){if(!It.includes(d.toLocaleUpperCase()))return;n(d.toLocaleUpperCase())}},[e]);const s=d=>{const l=It.findIndex(f=>f===d),c=It.findIndex(f=>f===t),m=l>c?"left":"right";a({animateDirection:m,animate:"x"})};return{pageControll:[x(g({},r),{page:t}),s]}}function Bs({pageLoading:e,model:t,hasResponse:n}){const[r,a]=u.exports.useState(!1),[s,d]=u.exports.useState(!1),l=()=>d(!0),c=()=>d(!1);u.exports.useEffect(()=>{!e&&t&&n&&setTimeout(()=>{a(!0)},1e3)},[e,n,t]);const{pageControll:m}=Hs();return{showpage:r,progress:s,pageControll:m,showProgress:l,hideProgress:c}}const Ns=e=>({api:se.queryGradeById,id:e,provider:Bs}),Di=u.exports.createContext(null);function de(){return u.exports.useContext(Di)}function Rs(e){const{id:t,slug:n}=e,{setTitle:r}=Kt(),{updateNavs:a}=pe();return u.exports.useEffect(()=>{r(" "),a([]);const s=({path:l,label:c})=>({path:`/classroom/${n}/${t}/${l}`,label:c}),d=[{label:"Video",path:"videos"},{label:"Tambah video",path:"add-video"},{label:"Siswa",path:"students"},{label:"Periksa quis",path:"quiz-check"},{label:"Diskusi",path:"discussion"}].map(s);return a(d),()=>{r("")}},[t]),Fs(Ns(t))}const Qs=e=>e.id.caption.content.title.quiz_count.duration.description.quizes(t=>t.id),nt=e=>C(()=>{const t=ut(),n=Rs(t);return u.exports.useEffect(()=>{n.refreshModel()},[]),i(Di.Provider,{value:n,children:i(qi,{dataKey:"videoByGrade",props:{gradeId:t.id},selector:Qs,children:n.pageLoading||!n.model?i(Ae,{}):i(e,{})})})}),Os=({handler:e,selected:t,video:n,index:r})=>h(ct,{onClick:e,"data-selected":t,sx:{px:0,transition:"all ease .5s","&[data-selected='true']":{"& > * > *":{color:"white"},bgcolor:"primary.main"}},dense:!0,button:!0,children:[i(ht,{sx:{opacity:t?1:0,transition:"all ease .5s"},children:i(En,{})}),i(pt,{secondary:n.durationText,primary:`${r+1}. ${n.title}`}),i(ht,{sx:{px:0},children:i(p,{component:"img",src:n.thumbnail,sx:{height:50,width:50}})})]}),Ws=C(({onItemClick:e,videos:t,selected:n})=>{const r=d=>()=>e(d),a=t.reduce((d,l)=>d+l.duration,0),s=Math.floor(a/60);return h(S,{children:[h(y,{align:"right",variant:"caption",sx:{fontWeight:"bolder",display:"block"},children:[t.length," video (",s," menit)"]}),i(T,{sx:{my:1}}),i(gt,{dense:!0,sx:{py:0},children:t.map((d,l)=>i(Os,{video:d,handler:r(d),selected:n?n.id===d.id:!1,index:l},d.id))})]})});const Ge=({url:e,onPlaying:t,play:n=!1,playOnTime:r,playerRef:a,onPlayEnded:s})=>{const d=a||u.exports.useRef(null),[l,{toggle:c,inline:m}]=k(n);return u.exports.useEffect(()=>{r&&m(!1);const v=d.current;v&&r&&v.pause().then(()=>{v.callAdapter("setCurrentTime",r).catch(console.log)})},[r,d]),i(p,{children:h(Tr,{onVmPlaybackEnded:s,playsinline:!0,ref:d,onVmCurrentTimeChange:v=>{t&&setTimeout(()=>{t(parseInt(v.detail.toFixed(1)))},1e3)},children:[e?i(Vr,{crossOrigin:"use-credentials",children:i("source",{"data-src":e})}):i(S,{}),i(Gr,{children:h(Lr,{fullWidth:!0,children:[i(zn,{children:i(Fr,{})}),h(zn,{space:"top",children:[i(Ur,{}),i(Hr,{}),i(Br,{separator:"/"})]})]})})]})})},Js=Nr(e=>({root:{"& > *":{fontFamily:"Roboto!important"}},editor:{"& > *":{fontFamily:"Roboto!important"}}})),Ei=e=>{const t=JSON.parse(e);return typeof t=="string"?Ei(t):t},it=({data:e})=>{const t=Js();try{const n=X.convertFromRaw(Ei(e)),r=X.EditorState.createWithContent(n);return i("div",{className:t.root,children:i(Mn.exports.Editor,{editorClassName:t.editor,toolbarHidden:!0,readOnly:!0,toolbar:{},editorState:r})})}catch(n){return console.log(n),null}},js=({model:e})=>{const{model:t}=de(),n=Q(),r=()=>n(`/admin/video/${e.id}/info`,{state:{backurl:{url:`/classroom/${t.name}/${t.id}/videos`,label:`Manage ke kelas ${t.name}`}}});return i(K,{exitBeforeEnter:!0,children:h(p,{component:U.div,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},sx:{p:1},children:[i(Ge,{url:e.content}),i(w,{onClick:r,fullWidth:!0,sx:{my:2,bgcolor:"primary.light",textTransform:"none"},variant:"contained",children:"Manage video"}),h(p,{sx:{p:2,border:"solid 1px",borderColor:"#bababa",borderRadius:2},children:[i(y,{variant:"h5",sx:{fontWeight:"bolder"},children:e.title}),i(T,{sx:{my:1}}),i(y,{sx:{fontWeight:"bolder"},children:e.caption}),i(it,{data:e.description})]})]},e.id)})},Ks=nt(C(()=>{const{data:e,fetch:t}=en();u.exports.useEffect(()=>{t()},[]);const[n,r]=u.exports.useState(null);return u.exports.useEffect(()=>{e.length&&e&&!n&&r(e[0])},[e,n]),i(p,{sx:{py:5},children:h(p,{sx:{display:"flex"},children:[i(p,{sx:{width:"70%",minHeight:"50vh"},children:n&&i(js,{model:n})}),i(p,{sx:{width:"30%",minHeight:"50vh"},children:i(Ws,{selected:n,videos:e!=null?e:[],onItemClick:r})})]})})})),Ys={noVideoText:"Silahkan pilih video terlebih dahulu",noVideoTextButton:"Pilih video",changeVideoTextButton:"Ganti video",changeVideoTextButton1:"Pilih video lainya",uploadVideoSuccess:"Video berhasil di tambahkan"};var Xs={videos:Ys};const Zs=({name:e})=>{const{errors:t}=Rr();if(!t[e])return i(u.exports.Fragment,{});const{message:n}=t[e];return i(Qr,{error:!0,children:n})},ed={backgroundColor:"white",position:"sticky",top:0,zIndex:10},zi=e=>{const t=JSON.parse(e);return typeof t!="object"?zi(t):t},td=e=>{const t=e.value;if(!t)return X.EditorState.createEmpty();try{const n=zi(t);if(!("blocks"in n&&"entityMap"in n))return X.EditorState.createEmpty();const a=X.convertFromRaw(n);return X.EditorState.createWithContent(a)}catch{return X.EditorState.createEmpty()}};class nd extends u.exports.Component{constructor(t){super(t);_(this,"EditorState");_(this,"reset",()=>{this.EditorState=X.EditorState.createEmpty()});_(this,"onEditorChange",t=>{const{field:n}=this.props;this.EditorState=t,n.onChange(X.convertToRaw(t.getCurrentContent()))});this.EditorState=td(this.props.field),typeof this.props.field.value=="string"&&this.props.field.onChange(X.convertToRaw(this.EditorState.getCurrentContent())),this.props.editorRef&&(this.props.editorRef.current={reset:this.reset})}render(){const t=this.props.disableOptions?{options:[]}:{};return h(S,{children:[i(Mn.exports.Editor,{onEditorStateChange:this.onEditorChange,toolbarHidden:this.props.disableOptions,toolbarStyle:ed,editorState:this.EditorState,toolbar:t,editorStyle:{minHeight:300},placeholder:this.props.placeholder}),i(Zs,{name:this.props.field.name})]})}}const id=Or(nd),tn=({name:e,editorRef:t,disableOptions:n=!1,placeholder:r=""})=>{const a=ie({name:e});return i(id,x(g({},a),{placeholder:r,editorRef:t,disableOptions:n}))},Mi={value:"__disabled__",label:"Pilih salah satu opsi"};class Pt extends u.exports.Component{constructor(t){super(t);_(this,"options");_(this,"handleFormChange",t=>{if(this.props.controller){const{controller:n}=this.props;if(n){const{onChange:r}=n.field;r(t)}}this.props.onChange&&this.props.onChange(t)});_(this,"handleChange",t=>{const n=t.target.value;this.handleFormChange(n)});_(this,"findInOption",t=>this.options.find(n=>n.value===t));_(this,"getErrorProps",()=>{var n,r;if(!this.props.controller)return{};const{fieldState:t}=this.props.controller;return{error:Boolean(t.error),helperText:(r=(n=t.error)==null?void 0:n.message)!=null?r:""}});_(this,"getValue",()=>{const t=r=>{if(!r)return"__disabled__";const a=this.findInOption(r);return a?a.value:"__disabled__"};if(this.props.controller){const{field:{value:r}}=this.props.controller;return t(r)}const{value:n}=this.props;return t(n)});_(this,"getFieldProps",()=>{var s;const a=this.props,{options:t,controller:n}=a,r=F(a,["options","controller"]);return x(g(g({},r),this.getErrorProps()),{SelectProps:x(g({},(s=r.SelectProps)!=null?s:{}),{inputRef:n==null?void 0:n.field.ref}),onChange:this.handleChange,value:this.getValue()})});this.options=[Mi,...this.props.options]}render(){const t=this.getFieldProps();return i("div",{children:i(kn,x(g({},t),{select:!0,fullWidth:!0,children:this.options.map(n=>i(Sn,{disabled:n.value===Mi.value,value:n.value,children:n.label},n.value))}))})}}const rd=e=>s=>{var d=s,{name:n,noUseForm:r}=d,a=F(d,["name","noUseForm"]);const l=Ie(),c=r||!l?x(g({name:n},a),{options:e}):{render(m){const f=x(g({},a),{name:n,controller:m,options:e});return i(Pt,g({},f))},name:n};return!l||r?i(Pt,g({},c)):i(Wr,g({},c))},kt=Xs.videos,od=()=>{const e=Ie(),t=u.exports.useRef(null),[n,r]=u.exports.useState(""),a=d=>{const l=d.target.files?d.target.files[0]:null;if(l){e.setValue("content",l);const c=new FileReader;c.onloadend=()=>{r(c.result)},c.readAsDataURL(l)}},s=()=>{t.current&&t.current.click()};return jr(()=>{var d;t.current&&((d=t.current)==null||d.addEventListener("change",a))}),[{inputRef:t,onClick:s},n]},ad=e=>({minHeight:256,alignItems:"center",justifyContent:"center",display:e?"flex":"block","& > .video-wrapper":{width:"100%",background:"black"}}),sd=()=>{const[{onClick:e,inputRef:t},n]=od(),a=Ie().formState.errors,{enqueueSnackbar:s,closeSnackbar:d}=B();return u.exports.useEffect(()=>{a.content&&(d(),s(a.content.message,{variant:"error"}))},[a]),h(p,{sx:ad(!n),children:[i("input",{style:{display:"none"},type:"file",accept:"video/*",ref:t}),n?i("div",{className:"video-wrapper",children:i(Ge,{url:n})}):i(S,{}),h("div",{children:[n?null:i(y,{children:kt.noVideoText}),i(w,{onClick:e,children:n?kt.changeVideoTextButton1:kt.changeVideoTextButton})]})]})},dd=C(()=>{const{form:e,reset:t,response:n,loading:r,handler:a}=we(),{pageControll:s,showProgress:d,hideProgress:l}=de(),c=s[1];return u.exports.useEffect(()=>{(r?d:l)()},[r]),Ve({message:kt.uploadVideoSuccess,show:Boolean(n),callback(m){c("VIDEOS")},variant:"success"}),i(Y,x(g({},e),{children:h(xe,{container:!0,spacing:2,onSubmit:a,component:"form",children:[i(xe,{item:!0,xs:12,md:8,children:i(sd,{})}),i(xe,{item:!0,xs:12,md:4,children:h(p,{sx:{pt:2},children:[i(A,{sx:{mb:3},label:"Judul video",name:"title",fullWidth:!0}),i(A,{sx:{mb:3},label:"Caption video",name:"caption",fullWidth:!0})]})}),h(xe,{item:!0,xs:12,children:[i(p,{sx:{p:[0,2]},children:i(tn,{placeholder:"Deskripsi video",name:"description"})}),i(p,{sx:{p:[0,2],mt:3},children:i(j,{variant:"outlined",fullWidth:!0,icon:i(Jr,{}),loading:r,children:"Upload video"})})]})]})}))}),ld=e=>(e.description=JSON.stringify(e.description),g({},e)),ud=()=>{const{modelId:e}=de();return i(Te,{parser:ld,merge:{gradeId:e},mutateKey:"addVideo",children:i(p,{sx:{mb:5},children:i(dd,{})})})},cd=C(({videos:e})=>{var $;const t=e.map(I=>({label:I.title,value:I.id})),{modelId:n,model:r}=de(),a=Q(),{enqueueSnackbar:s}=B(),[{loading:d,response:l},c]=Me({api:P.mutateAddVideoInGrade,merge:{gradeId:n}});u.exports.useEffect(()=>{l&&(s("Video berhasil di tambahkan",{variant:"success"}),a(`/batch/${r.name}/${r.id}/videos`))},[l]);const m=Ne(),f=ie({control:m.control,name:"videoId",defaultValue:t[0].value}),v=e.find(I=>I.id===f.field.value),b=m.handleSubmit(c);return h(p,{sx:{minHeight:"50vh",display:["block","flex"],"& > div":{p:1}},children:[i(p,{sx:{width:["100%","70%"],overflow:"hidden"},children:i(K,{exitBeforeEnter:!0,children:i(U.div,{transition:{x:{type:"tween"}},initial:{x:"-200%"},animate:{x:0},exit:{x:"200%"},children:v&&i(Ge,{url:v.content})},($=v==null?void 0:v.id)!=null?$:"video-id")})}),h(p,{component:"form",onSubmit:b,sx:{width:["100%","30%"]},children:[i(Pt,x(g({noUseForm:!0,disabled:d,size:"small"},f.field),{options:t,name:"videoId"})),i(j,{sx:{mt:2,textTransform:"none"},fullWidth:!0,icon:i(st,{}),loading:!1,children:"Simpan"})]})]})}),hd=C(()=>{const{modelId:e}=de(),{data:t,loading:n}=M(s=>s.queryVideoNotInGrade({id:e})),a=(()=>{var s;return t?(s=t.videoNotInGrade)!=null?s:[]:[]})();return i(K,{exitBeforeEnter:!0,children:i(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n?i(p,{sx:{py:5,display:"flex",justifyContent:"center"},children:h(p,{sx:{textAlign:"center"},children:[i(ne,{size:50}),i(y,{sx:{display:"block"},variant:"caption",children:"Loading"})]})}):i(N,{sx:{p:2},children:a.length?i(cd,{videos:a}):i(y,{align:"center",variant:"subtitle1",children:"Tidak ada video yang dapat di pilih"})})},n?"loading":"oke")})}),pd=nt(()=>(de(),h(S,{children:[i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Pilih dari video yang telah terupload"}),i(T,{sx:{my:2}}),i(hd,{}),i(y,{color:"primary",sx:{mt:2},variant:"h5",children:"Upload video baru"}),i(T,{sx:{my:2}}),i(N,{sx:{p:1,mb:5},children:i(ud,{})})]}))),gd=C(({rows:e,columns:t,paginator:n,paginationHandler:r,onRowClick:a})=>i(S,{children:i(Kr,{pagination:!0,paginationMode:"server",onRowClick:l=>a&&a(l.row),onPageChange:l=>{r(l+1,n.perPage)},onPageSizeChange:l=>{r(1,l+1)},page:n.currentPage?n.currentPage-1:1,rowsPerPageOptions:[10,20,30],rowCount:n.total-1,pageSize:n.perPage,rows:[...e],columns:t,autoHeight:!0})}));function md(){const[e,t]=u.exports.useState({user:null,action:"activation"}),n=s=>{t({user:s,action:s.status?"edit":"activation"})},r=()=>{t({user:null,action:"activation"})},a=s=>{t(x(g({},e),{action:s}))};return x(g({},e),{changeStudent:n,handleClose:r,changeAction:a})}const Ai=u.exports.createContext(null);function Le(){return u.exports.useContext(Ai)}const fd={activation:"activation",edit:"editUser"},xd=e=>t=>(e&&(e.name===t.name&&delete t.name,e.email===t.email&&delete t.email),t);function nn(e,t){const{enqueueSnackbar:n}=B(),{handleClose:r}=Le(),{initialFetch:a}=G();u.exports.useEffect(()=>{e&&(r(),n(t,{variant:"success"}),a())},[e])}const yd=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a}=we();B();const{handleClose:s,user:d}=Le();return G(),nn(a,`${d==null?void 0:d.name} berhasil di aktifkan`),u.exports.useEffect(()=>{e(t)},[t]),h(Y,x(g({},n),{children:[i(p,{sx:{p:1,mb:3,border:"solid 1px gray",borderRadius:1},children:i(y,{children:"Gunakan form ini untuk mengaktifkan akun & memberikan password ke pada pengguna agar dapat login dengan password yang diberikan."})}),h("form",{onSubmit:r,children:[i(A,{autoComplete:"off",fullWidth:!0,variant:"outlined",name:"password",type:"password",label:"Password"}),i(A,{sx:{my:2},fullWidth:!0,type:"password",variant:"outlined",name:"passwordConfirmation",label:"Konfirmasi password"}),i(j,{icon:i(Yr,{}),loading:t,children:"Aktifkan akun"})]})]}))}),vd=C(({onLoading:e})=>{const{loading:t,form:n,handler:r,response:a,error:s}=we();nn(a,"Perubahan berhasil di simpan"),u.exports.useEffect(()=>{s&&n.setError("email",{type:"backend",message:"Email telah di gunakan"})},[s]);const{user:d}=Le();return u.exports.useEffect(()=>{d&&(n.setValue("name",d.name),n.setValue("email",d.email))},[d]),u.exports.useEffect(()=>{e(t)},[t]),i(Y,x(g({},n),{children:h("form",{onSubmit:r,children:[i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"email",label:"Email"}),i(A,{sx:{mb:2},fullWidth:!0,variant:"outlined",name:"name",label:"Nama"}),i(j,{icon:i(Vt,{}),loading:t,children:"Simpan perubahan"})]})}))}),_d=C(()=>{const{user:e}=Le(),[{loading:t,response:n,error:r},a]=Me({api:P.mutateUserDelete,merge:{id:e==null?void 0:e.id}});return console.log(r),nn(n,"Pengguna berhasil di hapus"),h("div",{children:[h(y,{variant:"subtitle1",children:["Apakah anda yakin untuk menhapus akun ",e==null?void 0:e.name," ?"]}),i(j,{onClick:()=>a({}),sx:{my:2},icon:i(ke,{}),loading:t,children:"Hapus"})]})}),bd={activation:yd,edit:vd,delete:_d},wd=()=>{const{user:e,handleClose:t,action:n,changeAction:r}=Le(),a=e?bd[n]:u.exports.Fragment,[s,{inline:d}]=k(),l=!e||n==="delete"?"":fd[n],c=e&&n!=="delete"?Te:u.exports.Fragment,m=e&&n!=="delete"?{mutateKey:l,parser:xd(e),merge:{id:e.id}}:{};return h(An,{sx:{zIndex:100*100},onClose:s?void 0:t,open:Boolean(e),PaperProps:{sx:{width:["100vw","20vw"],overflow:"hidden"}},anchor:"right",children:[h(Mt,{onChange:(f,v)=>r(v),value:n,children:[i(fe,{sx:{textTransform:"none"},value:"edit",label:"Edit"}),i(fe,{sx:{textTransform:"none"},value:"activation",label:"Aktivasi akun",disabled:e&&e.status}),i(fe,{sx:{textTransform:"none"},value:"delete",label:"Hapus"})]}),i(K,{exitBeforeEnter:!0,children:i(U.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{x:{type:"tween"}},children:i(p,{sx:{p:2},children:i(c,x(g({},m),{children:i(a,g({},e?{onLoading:d}:{}))}))})},n)})]})},Cd=[{field:"name",headerName:"Nama siswa",flex:1},{field:"email",headerName:"Alamat email",flex:1},{field:"status",headerName:"Status",flex:.2,valueGetter(e){return e.row.status?"Aktif":"Non aktif"}}],Sd=C(()=>{const[e,{toggle:t,force:n}]=k(),{loading:r,form:a,handler:s,response:d}=we(),{initialFetch:l}=G();return Ve({message:"Siswa berhasil di tambahkan",show:Boolean(d),variant:"success",callback(c){n(!1)(),a.reset(),l()}}),h(N,{sx:{p:2,mt:2},children:[i(w,{color:e?"error":"primary",onClick:t,children:e?"Tutup":"Tambahkan siswa"}),i(Pe,{sx:{mt:e?2:0},in:e,children:h(xe,{container:!0,children:[i(xe,{item:!0,xs:12,md:6,children:i(Y,x(g({},a),{children:h("form",{onSubmit:s,children:[i(A,{sx:{mb:4},label:"Nama siswa",name:"name",fullWidth:!0}),i(A,{type:"email",label:"Alamat email",fullWidth:!0,name:"email"}),i(j,{sx:{mt:3},icon:i(qn,{}),loading:r,children:"Simpan"})]})}))}),i(xe,{item:!0,xs:12,md:6,sx:{px:2},children:i(y,{variant:"subtitle1",children:"Tambahkan siswa dengan mengirim email invitasi yang akan di daftarkan, siswa dapat login dengan link yang di berikan untuk mengganti password."})})]})})]})}),Id=C(()=>{const{result:e,initialFetch:t,actions:{go:n}}=G();u.exports.useEffect(()=>{t()},[]);const r=e.data.map(s=>({name:s.student.name,email:s.student.email,id:s.student.id,status:s.student.active})),{changeStudent:a}=Le();return i(p,{sx:{py:2},children:i(gd,{onRowClick:a,paginationHandler:n,paginator:e.paginator,columns:Cd,rows:r})})}),Pd=nt(()=>{const{modelId:e}=de(),t=md();return h(Ct,{dataKey:"students",includes:{gradeId:e},children:[i(Te,{parser:n=>({args:n}),merge:{grade_id:e},mutateKey:"addUser",children:i(Sd,{})}),h(Ai.Provider,{value:t,children:[i(wd,{}),i(Id,{})]})]})}),le=({when:e,children:t})=>i(S,{children:e?t:null}),kd=({histories:e,quiz:t})=>{const n=e==null?void 0:e.find(r=>r.id.toString()===t.id);return h(mt,{children:[i(le,{when:!n,children:"-"}),i(le,{when:Boolean(n),children:n.correct?i(Gt,{sx:{color:"success.main"}}):i(dt,{sx:{color:"error.main"}})})]})},$d=({video:e,studentGrade:t})=>h(Tn,{children:[i(mt,{children:t.student.name}),e.quizes.map(n=>i(kd,{quiz:n,histories:t.progress.quizHistories},n.id))]}),qd=C(({videos:e})=>{var l;const[t,n]=u.exports.useState(null),{data:r,fetch:a}=en();u.exports.useEffect(()=>{a()},[]);const s=rd(e.map(c=>({label:c.title,value:c.id})));u.exports.useEffect(()=>{r&&r.length&&!t&&n(r[0].id)},[r,t]);const d=e.find(c=>c.id===t);return h("div",{children:[i(p,{sx:{my:2},children:i(N,{sx:{p:2},children:i(s,{value:t,label:"Pilih video",size:"small",variant:"standard",name:"videoId",onChange:n,noUseForm:!0})})}),i(le,{when:Boolean(d),children:h(Xr,{children:[i(Zr,{children:h(Tn,{children:[i(mt,{children:"Siswa"}),Array.from({length:(l=d==null?void 0:d.quiz_count)!=null?l:0}).map((c,m)=>h(mt,{sx:{width:"15%"},children:["Quiz ",m+1]},m))]})}),d?i(eo,{children:r.map(c=>i($d,{video:d,studentGrade:c},c.id))}):null]})})]})}),Dd=e=>e.id.student(t=>t.id.name).progress(t=>t.id.quiz_histories),Ed=nt(()=>{const{model:e}=de(),{data:t,fetch:n}=en();return u.exports.useEffect(()=>{n()},[]),i(qi,{selector:Dd,dataKey:"studentByGrade",props:{gradeId:e.id},children:i(qd,{videos:t})})});function zd(e){const{user:t}=oe(),[n,r]=u.exports.useState(null),a=u.exports.useCallback(c=>(t==null?void 0:t.id)===c.user_id,[t]),[s,d]=u.exports.useState(null),l=()=>s&&(n==="edit"||n==="editReply")?s.content:null;return{enableCrud:a,setFormMode:r,formMode:n,gradeId:e,userId:t==null?void 0:t.id,setSelected:d,initialContent:l(),selectedId:s?s.id:""}}const Ti=u.exports.createContext(null),Fe=()=>u.exports.useContext(Ti),Md="Thread berhasil ditambahkan",Ad="Perubahan berhasil disimpan",Td="Balasan anda berhasil di tambahkan",Vd="Perubahan berhasil disimpan";var Gd={create:Md,edit:Ad,addReply:Td,editReply:Vd};const Ld=C(()=>{const{formMode:e,setFormMode:t,initialContent:n,setSelected:r,selectedId:a}=Fe(),{loading:s,form:d,response:l,handler:c,reset:m}=we(),{initialFetch:f}=G();u.exports.useEffect(()=>{n&&e&&d.setValue("content",n)},[n,e]);const v=()=>{s||(m(),t(null))},b=u.exports.useCallback(()=>e?Gd[e]:"",[e]);return Ve({message:b(),show:Boolean(l),callback:()=>{r(null),t(null),v(),f()},variant:"success"}),i(We,{fullWidth:!0,open:Boolean(e),onClose:v,children:i(Y,x(g({},d),{children:i(p,{sx:{p:2},children:h("form",{onSubmit:c,children:[i(Je,{children:"Konten diskusi : "}),i(tn,{name:"content"}),i(j,{icon:i(Lt,{}),loading:s,children:"Simpan"})]})})}))})}),Vi=u.exports.createContext(null),rn=()=>u.exports.useContext(Vi),Fd=()=>{const{open:e,handleCloseDialog:t,getContentText:n,loading:r,onConfirm:a}=rn();return h(We,{open:e,onClose:t,children:[i(lt,{children:n()}),h(Ft,{children:[i(w,{disabled:r,onClick:t,startIcon:i(to,{}),children:"Batal"}),i(j,{color:"error",onClick:a,icon:i(ke,{}),loading:r,children:"Hapus"})]})]})},Ud=({api:e,callback:t,getSuccesMessage:n,getContentText:r})=>{const[a,s]=u.exports.useState(e),d=ze(a),{loading:l,data:c,setQuery:m}=M(),[f,v]=u.exports.useState(null),[b,$]=u.exports.useState(!0);Ve({message:n?n():"Data berhasil di hapus",callback(){v(null),t(),$(!0)},variant:"success",show:Boolean(c&&c[d])&&!b,autoShow:!1});const I=()=>{l||v(null)},z=(ge,te)=>()=>{s(te||e),v(ge.id)},ee=()=>($(!1),m(ge=>ge[a]({id:f})));return{open:Boolean(f),loading:l,handleCloseDialog:I,handleOpenDialog:z,getContentText:r,Dialog:Fd,onConfirm:ee}},Hd=({model:e})=>{const{setSelected:t,setFormMode:n}=Fe(),{handleOpenDialog:r}=rn(),a=r(e,P.mutateDeleteDiscussionReply);return h(p,{sx:{py:1,textAlign:"right"},children:[i(Se,{color:"primary",onClick:()=>{t(e),n("editReply")},children:i(Vt,{})}),i(Se,{color:"error",onClick:a,children:i(ke,{})})]})},Bd=({model:e})=>{const{enableCrud:t}=Fe();return h(p,{sx:{p:1,ml:[0,3,10]},children:[h(p,{sx:{display:"flex",py:1},children:[i(p,{children:i(Vn,{src:"/test.png",alt:e.user.name})}),h(p,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),i(T,{}),i(it,{data:e.content}),t(e)?i(Hd,{model:e}):null,i(T,{})]})},Nd=({replies:e})=>i(S,{children:e.map(t=>i(Bd,{model:t},t.id))}),Rd=({model:e})=>{const{setSelected:t,setFormMode:n,enableCrud:r}=Fe(),{handleOpenDialog:a}=rn(),s=u.exports.useCallback(()=>{t(e),n("edit")},[]),d=a(e);return h(p,{sx:{display:"flex"},children:[h(p,{sx:{display:"flex",alignItems:"center"},children:[i(p,{children:i(Vn,{src:"/test.png",alt:e.user.name})}),h(p,{children:[i(y,{sx:{ml:1},variant:"subtitle2",children:e.user.name}),i(y,{sx:{ml:1},variant:"subtitle2",children:e.created_at})]})]}),r(e)?h(p,{sx:{ml:"auto"},children:[i(Ut,{title:"Hapus",children:i(Se,{color:"error",onClick:d,children:i(ke,{})})}),i(Ut,{title:"Edit",children:i(Se,{color:"primary",onClick:s,children:i(Vt,{})})})]}):null]})},Qd=({model:e})=>{const{setSelected:t,setFormMode:n}=Fe();u.exports.useCallback(()=>{t(e),n("edit")},[]);const[r,a]=u.exports.useState(!1),s=u.exports.useCallback(()=>{t(e),n("addReply")},[]);return h(N,{sx:{mb:2},children:[i(p,{sx:{p:2},children:i(Rd,{model:e})}),i(T,{}),i(p,{sx:{p:2},children:i(it,{data:e.content})}),i(T,{}),h(p,{sx:{p:2},children:[h(p,{sx:{display:"flex"},children:[i(w,{startIcon:i(Lt,{}),onClick:()=>a(!r),sx:{textTransform:"none"},children:"Tampilkan komentar"}),i(w,{startIcon:i(no,{}),onClick:s,sx:{textTransform:"none",ml:"auto"},children:"Buat komentar"})]}),h(Pe,{in:r,unmountOnExit:!0,children:[e.replies.length?null:i(y,{variant:"h5",align:"center",sx:{py:3},children:"Thread ini belum memiliki komentar"}),i(Nd,{replies:e.replies})]})]})]})},Od=C(()=>{const{setFormMode:e}=Fe(),{isEmpty:t,initialFetch:n,result:{data:r}}=G();u.exports.useEffect(()=>{n()},[]);const a=u.exports.useCallback(()=>{e("create")},[]),s=Ud({api:P.mutateDeleteDiscussion,callback:n,getContentText(){return"Apakah anda yakin untuk menghapus thread diskusi ini ? "}});return h(Vi.Provider,{value:s,children:[i(s.Dialog,{}),t?h(p,{sx:{textAlign:"center",py:5},children:[i(y,{align:"center",variant:"h5",children:"Saat ini tidak ada thread diskusi"}),i(w,{onClick:a,sx:{textTransform:"none"},children:"Klik disini untuk menambahkan"})]}):null,h(H,{children:[i(p,{sx:{my:2},children:i(w,{startIcon:i(Lt,{}),onClick:a,children:"Buat thread diskusi"})}),r.map(d=>i(Qd,{model:d},d.id))]})]})}),Wd={addReply:"addDiscussionReply",create:"addDiscussion",edit:"editDiscussion",editReply:"editDiscussionReply"},Gi=({gradeId:e})=>{const t=zd(e),n=t.formMode?Wd[t.formMode]:"addDiscussion",r=({content:a})=>{const s={content:JSON.stringify(a),userId:t.userId,gradeId:e};return t.formMode==="addReply"&&t.selectedId?s.discussionId=t.selectedId:t.selectedId&&(t.formMode==="edit"||t.formMode==="editReply")&&(s.id=t.selectedId),s};return i(Ti.Provider,{value:t,children:h(Ct,{dataKey:"discussion",includes:{gradeId:e},children:[i(Te,{merge:{userId:t.userId},mutateKey:n,parser:r,children:i(Ld,{})}),i(Od,{})]})})},Jd=nt(()=>{const{modelId:e}=de();return i(Gi,{gradeId:e})}),jd=({id:e})=>{const{data:t,loading:n,setQuery:r}=M(),a=()=>{r(d=>d.queryVideo({id:e},l=>l.id.content.caption.description.duration.quiz_count.thumbnail.title.grades(c=>c.id.name)))},{setTitle:s}=Kt();return u.exports.useEffect(()=>(s("Menagamen video"),()=>s("")),[]),u.exports.useEffect(()=>{a()},[e]),{video:t?t.video:null,isNotFound:t&&!t.video,loading:n}},Li=u.exports.createContext(null);function rt(){return u.exports.useContext(Li)}const Kd=[{path:"info",name:"Informasi video"},{path:"quiz",name:"Quis"},{path:"edit",name:"Edit"}];function on(e){return C(()=>{const t=ut(),n=jd(t),{updateNavs:r}=pe();return u.exports.useEffect(()=>{const a=d=>`/admin/video/${t.id}${d?`/${d}`:""}`,s=Kd.map(d=>({label:d.name,path:a(d.path==="/"?"":d.path)}));r([...s])},[]),i(Li.Provider,{value:n,children:!n.video||n.loading?i(Ae,{}):i(e,{})})})}const Fi=on(()=>{const{video:e}=rt(),t=Q(),n=({id:a,name:s})=>()=>t(`/classroom/${s}/${a}/videos`),r=`/admin/video/${e==null?void 0:e.id}/quiz`;return h("div",{children:[i(p,{sx:{mb:2},children:i(Ge,{url:e==null?void 0:e.content})}),h(p,{sx:{display:"flex",mb:5},children:[i(p,{sx:{width:"70%"},children:h(p,{sx:{p:2,pl:0},children:[h(p,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:[i(y,{variant:"h5",children:e==null?void 0:e.title}),i(y,{variant:"subtitle1",children:e==null?void 0:e.caption})]}),i(y,{sx:{my:1},variant:"subtitle1",children:"Deskripsi video"}),i(p,{sx:{p:1,border:"solid 1px",borderColor:a=>a.palette.grey.A400,borderRadius:1},children:i(it,{data:e==null?void 0:e.description})})]})}),i(p,{sx:{width:"30%"},children:h(N,{sx:{p:1,minHeight:500},children:[i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Jumlah quiz"}),h(p,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"button",sx:{cursor:"pointer",display:"block",textTransform:"none"},children:(e==null?void 0:e.quiz_count)?`${e.quiz_count} kuis`:"-"}),i(w,{to:r,sx:{textTransform:"none"},component:io,children:(e==null?void 0:e.quiz_count)?"Tampilkan quis":"Buat quis"})]}),i(y,{sx:{fontWeight:"bolder"},variant:"caption",children:"Batch / Kelas"}),i(T,{}),i(gt,{dense:!0,children:e==null?void 0:e.grades.map(a=>i(ct,{dense:!0,onClick:n(a),sx:{bgcolor:s=>s.palette.grey["200"]},button:!0,children:i(pt,{primary:a.name})},a.id))})]})})]})]})}),Ce=["A","B","C","D"],Ui=Ce.map((e,t)=>({content:"",type:"text",index:t})),Yd=Ce.map((e,t)=>({content:null,type:"image",index:t}));function Xd({video:e}){const[t,n]=u.exports.useState({type:V.IMAGE_MATCH,text:"",multipleChoise:{answer:0,question:"",additionalFile:null,type:"text"}}),[r,a]=u.exports.useState(Ui);return u.exports.useEffect(()=>{console.log("called"),t.multipleChoise.type==="text"?a([...Ui]):a([...Yd])},[t.multipleChoise]),{multipleChoiseOptions:r,formValues:t,callbacks:{onMultipleChoiseChange:f=>v=>{const b=x(g({},t.multipleChoise),{[f]:v});n(x(g({},t),{multipleChoise:g({},b)}))},onTextChange:f=>{n(x(g({},t),{text:f}))},changeMultipleChoiseOptions:f=>v=>{const b=[...r];b[f].content=v,a([...b])}},changeType:f=>{const v=x(g({},t),{text:"",type:f});f===V.MULTIPLE_CHOICE&&(v.multipleChoise={answer:0,type:"text",question:"",additionalFile:null}),n(g({},v))},video:e}}const Hi=u.exports.createContext(null);function Bi(){return re({name:"type",defaultValue:V.IMAGE_MATCH})}function Ni(){return u.exports.useContext(Hi)}const Zd=()=>{const{video:e}=Ni(),[t,n]=u.exports.useState(0),r=(l,c)=>n(c),[a,{toggle:s}]=k(!1),d=ie({name:"showAt",defaultValue:0});return u.exports.useEffect(()=>{d.field.onChange(t)},[t]),h(p,{paddingY:2,children:[i(Ge,{url:e.content,play:a,playOnTime:t}),h(p,{marginTop:1,children:[i(Je,{children:"Di tampilkan pada menit"}),i(p,{children:i(ro,{min:0,max:e.duration,track:!1,onChange:r,valueLabelDisplay:"off"})}),h(p,{display:"flex",justifyContent:"space-between",children:[i(y,{variant:"subtitle2",children:et(0)}),i(y,{variant:"subtitle2",children:et(t)}),i(y,{variant:"subtitle2",children:et(e.duration)})]})]})]})},el=[{label:"Pilihan ganda",value:V.MULTIPLE_CHOICE},{label:"Pencocokan gambar",value:V.IMAGE_MATCH},{label:"Pengurutan huruf",value:V.LETTER_SEQUENCE}],tl=()=>{Ni();const e=re({name:"type",defaultValue:V.IMAGE_MATCH}),{field:{onChange:t}}=ie({name:"type",defaultValue:V.IMAGE_MATCH}),n=Ie();return u.exports.useEffect(()=>{n.setValue("text","")},[e]),i(p,{sx:{py:2},children:h(Gn,{component:"fieldset",children:[i(Je,{component:"legend",children:"Jenis quis"}),i(Ln,{value:e,onChange:t,row:!0,name:"row-radio-buttons-group",children:el.map(r=>i(Fn,{value:r.value,control:i(Un,{}),label:r.label},r.value))})]})})},Ri=({label:e,onlyUnique:t=!1})=>{const[n,{inline:r}]=k(),a=re({name:"text"}),s=l=>{if(Et(l.key).isNumeric()){l.preventDefault();return}n&&r(!1),a.includes(l.key)&&(l.preventDefault(),r(!0))},d={size:"small",fullWidth:!0,helperText:n?"Huruf telah di gunakan":"",error:n,name:"text"};return t&&(d.onKeyDown=s),i(p,{sx:{pr:2},children:i(A,x(g({name:"text"},d),{label:e}))})},nl=()=>i(S,{children:i(Ri,{label:"Masukan huruf yang digunakan",onlyUnique:!0})}),il=()=>i(S,{children:i(Ri,{label:"Masukan Kata yang di gunakan"})}),Qi=u.exports.createContext(null),Oi=()=>u.exports.useContext(Qi);class rl extends u.exports.Component{constructor(t){super(t);_(this,"fileRef");_(this,"handler",()=>{this.fileRef.current&&this.fileRef.current.click()});_(this,"getContext",()=>g({clickHandler:this.handler,reset:this.reset},this.state));_(this,"setFormValue",t=>{const{field:n}=this.props.controller;n.onChange(t)});_(this,"reset",()=>{const{field:t}=this.props.controller;t.onChange(void 0),this.setState({previewUrl:"",type:""})});_(this,"onChange",t=>{const n=t.target.files;if(n&&n.length){const r=n[0],a=URL.createObjectURL(r);this.setState({previewUrl:a,type:r.type},()=>{this.props.controller&&this.setFormValue(r)})}});var n;this.fileRef=u.exports.createRef(),this.state={previewUrl:(n=this.props.initialUrl)!=null?n:"",type:""}}render(){return h(Qi.Provider,{value:this.getContext(),children:[this.props.children,i("input",{ref:this.fileRef,onChange:this.onChange,type:"file",accept:this.props.accept,style:{display:"none"}})]})}}const ol=r=>{var a=r,{children:e,name:t}=a,n=F(a,["children","name"]);const s=ie({name:t});return i(rl,x(g({name:t},n),{controller:s,children:e}))},al=()=>{const{previewUrl:e,reset:t,clickHandler:n}=Oi();return h(p,{sx:{position:"relative",backgroundColor:"black",display:"flex",justifyContent:"center"},children:[i(p,{component:"img",src:e,sx:{maxHeight:144,maxWidth:256}}),i(Ut,{title:"Ganti foto",children:i(Se,{color:"secondary",onClick:()=>{t(),n()},size:"small",style:{top:0,right:0,position:"absolute"},children:i(ke,{})})})]})},sl=({label:e})=>{const{clickHandler:t,previewUrl:n}=Oi();return h(S,{children:[i(w,{fullWidth:!0,size:"small",variant:"contained",color:"primary",onClick:t,children:e}),i(p,{textAlign:"center",paddingY:2,children:n?i(al,{}):null})]})},Wi=({name:e,label:t})=>i(ol,{accept:"image/*",name:e,children:i(sl,{label:t})}),dl=[{label:"Text",value:"text"},{label:"Gambar",value:"image"}],ll=()=>{re({name:"multipleChoice.type",defaultValue:"text"});const{field:e}=ie({name:"multipleChoice.type",defaultValue:"text"});return h(Gn,{component:"fieldset",children:[i(Je,{component:"legend",children:"Jenis pilihan ganda"}),i(Ln,x(g({},e),{row:!0,children:dl.map(t=>i(Fn,{value:t.value,control:i(Un,{}),label:t.label},t.value))}))]})},ul={init:{y:"-350%",opacity:0},exit:{y:"350%",opacity:0},animate:{y:0,opacity:1}},cl=s=>{var d=s,{index:e,delay:t,value:n,type:r}=d,a=F(d,["index","delay","value","type"]);const l=`multipleChoice.options.[${e}].content`,c=`Opsi ${Ce[e]}`;return i(U.div,{style:{overflowX:"hidden"},transition:{y:{delay:t,type:"tween"},opacity:{delay:t}},variants:ul,animate:"animate",initial:"init",exit:"exit",children:i(p,{sx:{my:2,pr:2},children:r==="image"?h(S,{children:[i(y,{children:c}),i(Wi,{name:l,label:"Pilih gambar"})]}):i(A,{size:"small",label:c,fullWidth:!0,name:`multipleChoice.options.[${e}].content`})})})},hl=()=>{const{field:e}=ie({name:"multipleChoice.answer",defaultValue:0});return i(Pt,x(g({noUseForm:!0},e),{label:"Opsi jawaban yang benar",size:"small",sx:{my:2,pr:2},options:Ce.map((t,n)=>({value:n+1,label:`Opsi ${t}`}))}))},pl=()=>{const e=re({name:"multipleChoice.type",defaultValue:"text"});ie({name:"multipleChoice.additionalFile",defaultValue:""});const t=Ie();return u.exports.useEffect(()=>{Ce.forEach((n,r)=>{const a=`multipleChoice.options.[${r}].content`;t.setValue(a,"")})},[e]),h("div",{style:{overflow:"hidden"},children:[h(p,{sx:{pr:2,mb:2},children:[i(A,{sx:{my:2},label:"Masukan pertanyaan quis",name:"multipleChoice.question",size:"small",fullWidth:!0}),i(Wi,{name:"multipleChoice.additionalFile",label:"Upload foto soal tambahan"})]}),i("div",{children:i(ll,{})}),h("div",{children:[i(p,{children:i(K,{exitBeforeEnter:!0,children:Ce.map((n,r)=>u.exports.createElement(cl,x(g({},n),{type:e,index:r,width:e==="image"?"100%":"50%",key:`${n}-${e}`,delay:(r+1)*.1,label:Ce[r]})))})}),i(hl,{})]})]})},Ji=u.exports.createContext(null),Ue=()=>u.exports.useContext(Ji),an=n=>{var r=n,{children:e}=r,t=F(r,["children"]);const{show:a,handleClose:s}=t,d=u.exports.useRef(null),[l,c]=u.exports.useState({height:0,width:0});return u.exports.useEffect(()=>{if(d.current&&a){const m=d.current;c({height:window.innerHeight-m.clientHeight,width:"100vw"})}},[a,d]),h(An,{keepMounted:!0,open:a,anchor:"bottom",sx:{zIndex:1e3*1e3},PaperProps:{sx:{minHeight:"100vh",width:"100vw"}},onClose:()=>s(!1),children:[i(Qe,{color:"transparent",variant:"outlined",elevation:0,ref:d,sx:{position:"static"},children:i(Oe,{children:i(w,{onClick:()=>s(!1),children:"Tutup"})})}),i(Ji.Provider,{value:x(g({},l),{show:a,handleClose:s}),children:i(p,{sx:x(g({},l),{overflow:"hidden"}),children:l.height?e:i("p",{children:"lol"})})})]})},ji=[];Object.keys(Ht).forEach(e=>{e!=="transparent"&&Object.keys(Ht[e]).forEach(t=>{ji.push(Ht[e][t])})});const Ki=ji,Yi=e=>{const t=Hn.random.arrayElement(Ki);return je.exports.find(e,t)?Yi(e):t},gl=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:Yi(n)});function ml({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const s=(e.width()-t.length)/t.length;return{x:r?s*r:0,y:0,width:s,height:s/2}}}const fl=(e,t)=>new oo.Arrow({stroke:e,strokeWidth:5,globalCompositeOperation:"source-over",points:t}),xl=e=>[e.getClientRect().x+e.getClientRect().width/2,e.height()];function yl({x:e,y:t},n){const r=n.y(),a=n.x()+n.width(),s=n.x(),d=n.y()+n.width(),l=e>=s&&e<=a,c=t>=r&&t<=d;return l&&c}const vl=(e,t,n)=>{const{bgColor:r}=n,a=[...xl(e),t.x,t.y];return fl(r,a)},_l=(e,t="text")=>e==null?void 0:e.find("Group").toArray().filter(n=>n.getAttr("data-role")===t),bl=({index:e,stage:t,nodes:n,layer:r})=>a=>{if(n[e].hasArrow)return new Promise(b=>b({nodes:n,arrow:null}));const d=a.currentTarget,l=t.getPointerPosition(),m=n[e].bg,f=vl(a.target,l,{bgColor:m});f.setAttr("data-from",d.getAttr("data-letter"));const v=(b,$)=>{b.points($),r.batchDraw()};return r.add(f),new Promise(b=>{t.on("mouseup touchend",()=>{const I=_l(t,"image").find(ee=>yl(t.getPointerPosition(),ee));let z=null;if(I){const ee=I.x()+I.width()/2;f.points()[0],f.points()[1],I.y(),z={points:[f.points()[0],f.points()[1],I.x()+I.width()/2,I.y()],from:f.getAttr("data-from"),to:I.getAttr("data-letter"),bg:f.stroke(),arrowIndex:e,fromId:d.getAttr("id"),toId:I.getAttr("id")},n[e].hasArrow=!0}b({arrow:z,nodes:n}),f.remove(),r.batchDraw(),t.off("mouseup touchend mousemove touchmove")}),t.on("mousemove touchmove",()=>{const $=t.getPointerPosition();$&&v(f,[f.points()[0],f.points()[1],$.x,$.y])})})},sn=u.exports.createContext(null);function dn(){return u.exports.useContext(sn)}const ln=u.exports.createContext(null);function un(){return u.exports.useContext(ln)}const wl=({x:e,y:t,bg:n,text:r,width:a,height:s,pos:d,index:l,hasArrow:c})=>{const m=Re(),{stage:f}=dn(),{arrows:v}=un(),b=f.current.height(),{mouseHandler:$}=un(),I=$(l),z=d==="start"?"text":"image",ee="/letters/"+r.toLocaleLowerCase()+"0.png",[ge]=Bn(ee),te=`item-${z}-${l}`,ue=v.find(lr=>lr.toId===te),Be=()=>ue||z==="text"?ue?ue.bg:n:m.palette.grey["200"];return h(Nn,{id:`item-${z}-${l}`,"data-letter":r,"data-role":z,height:s,width:a,onTouchStart:z==="image"?void 0:I,onDragStart:z==="image"?void 0:I,onMouseDown:z==="image"?void 0:I,x:e,y:d==="start"?0:b-(s+20),children:[i(Rn,{height:s,width:a,fill:Be()}),z==="image"?i(Qn,{height:s,width:a,image:ge}):i(On,{text:r,fill:"white",height:s,fontSize:s,width:a,align:"center"})]})},Xi=({pos:e="start",items:t})=>i(S,{children:t.map((n,r)=>u.exports.createElement(wl,x(g({},n),{index:r,key:n.id,pos:e})))}),Cl=({arrows:e,showHint:t})=>{let n=e;const{stage:{current:r}}=dn();if(t&&r){const a=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="text"),s=r.find("Group").toArray().filter(d=>d.getAttr("data-role")==="image");n=n.map(d=>{const l=a.find(m=>m.id()===d.fromId),c=s.find(m=>m.id()===d.toId);return x(g({},d),{points:[l.x()+l.width()/2,l.y()+l.height(),c.x()+c.width()/2,c.y()]})})}return i(S,{children:n.map((a,s)=>i(ao,{points:a.points,stroke:a.bg},s))})};function cn({isCorrect:e,onSuccess:t,onSubmit:n}){const[r,{inline:a}]=k(),[s,{inline:d}]=k();return{loading:r,onSubmitHandler:()=>{n?(a(!0),n(e).then(()=>{t(),d(!0),a(!1)})):(t(),d(!0))},submitted:s}}const Sl=()=>{const{popArrow:e,arrows:t,toggleHint:n,isSubmitDisabled:r,isAnswerCorrect:a,onSubmit:s,showHint:d}=un(),[l,{force:c}]=k(),{onSubmitHandler:m,submitted:f,loading:v}=cn({isCorrect:a,onSuccess:c(!0),onSubmit:s});return h(Oe,{children:[i(y,{sx:{mr:"auto"},children:"Samakan huruf & gambar berikut sesuai hurufnya"}),h(p,{sx:{mr:2,display:"flex",alignItems:"center"},children:[f?i(y,{sx:{display:"inline-block",mr:2},children:a?"Jawaban anda benar":"Maaf jawaban anda tidak tepat"}):null,h(Bt,{sx:{display:"block"},children:[i(w,{onClick:e,disabled:v||f||t.length===0,size:"small",variant:"outlined",sx:{textTransform:"none"},startIcon:i(At,{}),children:"Batalkan pilihan"}),i(w,{onClick:m,disabled:r||f,size:"small",variant:"outlined",sx:{textTransform:"none"},children:"Simpan jawaban"})]})]}),i(w,{onClick:n,disabled:!l||a,size:"small",variant:"outlined",sx:{textTransform:"none"},children:d?"Jawaban saya":"Tampilkan kunci jawaban"})]})};class Il extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"headerRef");_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],l=ml({stage:r,text:a.join("")});return(t?je.exports.shuffle(a):a).forEach((c,m)=>{const f=gl(m,c,d);s.push(x(g(g({},f),l("",m)),{hasArrow:!1})),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{const t=this.getNodes(!1),n=this.getNodes(!0).map((r,a)=>x(g({},r),{bg:t[a].bg}));this.setState({nodes:t,shufledNodes:n})});_(this,"getArrows",()=>this.state.showHint?this.state.nodes.map((t,n)=>{const r=this.state.shufledNodes.findIndex(s=>s.text===t.text),a=this.state.shufledNodes[r];return{toId:`item-image-${r}`,fromId:`item-text-${n}`,bg:t.bg,to:t.text,from:t.text,arrowIndex:n,points:[a.x+t.width/2,t.height,a.x+a.width/2,this.stage.current.height()-t.height]}}):this.state.arrows);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"mouseHandler",t=>n=>bl({index:t,stage:this.stage.current,layer:this.layer.current,nodes:this.state.nodes})(n).then(a=>{a.arrow&&this.setState(s=>(a.arrow&&s.arrows.push(a.arrow),x(g({},s),{nodes:a.nodes})))}));_(this,"getStageHeight",()=>this.headerRef.current?this.props.stageHeight-this.headerRef.current.clientHeight:0);_(this,"popArrow",()=>{this.setState(t=>{const n=t.arrows.pop();return n&&(t.nodes[n.arrowIndex].hasArrow=!1),g({},t)})});_(this,"toggleHint",()=>{this.setState({showHint:!this.state.showHint})});_(this,"isAnswerCorrect",()=>this.state.arrows.length===this.props.text.length?!this.state.arrows.find(n=>n.from!==n.to):!1);_(this,"getContextValues",()=>({mouseHandler:this.mouseHandler,arrows:this.getArrows(),popArrow:this.popArrow,nodes:this.state.nodes,toggleHint:this.toggleHint,isSubmitDisabled:this.state.arrows.length!==this.props.text.length,isAnswerCorrect:this.isAnswerCorrect(),onSubmit:this.props.onSubmit,showHint:this.state.showHint}));this.state={nodes:[],shufledNodes:[],showHint:!1,arrows:[]},this.stage=u.exports.createRef(),this.layer=u.exports.createRef(),this.headerRef=u.exports.createRef()}render(){return h(ln.Provider,{value:this.getContextValues(),children:[i(Qe,{color:"transparent",position:"static",ref:this.headerRef,children:i(Sl,{})}),i(Wn,{ref:this.stage,width:window.innerWidth,height:this.getStageHeight(),children:i(Jn,{ref:this.layer,children:i(sn.Provider,{value:{stage:this.stage,layer:this.layer},children:h(ln.Provider,{value:this.getContextValues(),children:[i(Xi,{items:this.state.nodes}),i(Xi,{pos:"end",items:this.state.shufledNodes}),i(Cl,{showHint:this.state.showHint,arrows:this.getArrows()})]})})})})]})}}const Pl=({text:e,onSubmit:t})=>{const{height:n,width:r}=Ue();return i(S,{children:i(Il,{text:e,onSubmit:t,stageHeight:n})})};function kl(e){const[t,n]=u.exports.useState(-1),[r,{inline:a}]=k(),{show:s}=Ue();return u.exports.useEffect(()=>{n(-1),a(!1)},[s]),{isSubmitted:r,isTouched:t!==-1,changeAnswer:c=>{r||n(c)},onSubmitted:()=>{t!==-1&&a(!0)},selected:t,isAnswerCorrect:t?t===e.answer-1:!1,onSubmit:e.onSubmit}}const Zi=u.exports.createContext(null);function hn(){return u.exports.useContext(Zi)}const $l=["A","B","C","D"],ql=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=hn();return console.log(t),h(p,{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[i(p,{sx:{height:100,width:"100%",backgroundImage:`url(${t})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),i(y,{align:"center",variant:"h2",children:$l[e]})]})},Dl=["A","B","C","D"],El=({index:e,content:t})=>{const{selected:n,changeAnswer:r}=hn();return h("div",{role:"button",onClick:()=>r(e),className:"item","data-selected":n===e,children:[h(y,{variant:"subtitle2",sx:{fontWeight:"bolder"},children:["Opsi ",Dl[e]]}),i(y,{variant:"subtitle1",children:t})]})},zl=()=>{const{selected:e,onSubmitted:t,isAnswerCorrect:n,onSubmit:r}=hn(),{handleClose:a}=Ue(),{loading:s,onSubmitHandler:d,submitted:l}=cn({isCorrect:n,onSubmit:r,onSuccess:t});return h(p,{sx:{display:"flex",alignItems:"center",width:"90%"},children:[i(y,{sx:{color:n?"success.main":l?"error,main":"inherit"},children:l?n?"Jawaban anda benar":"Maaf jawaban anda kurang tepat":"Klik kunci jawaban untuk melihat hasil jawaban anda"}),i(K,{exitBeforeEnter:!0,children:i(U.div,{style:{marginLeft:"auto"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s?i(ne,{sx:{ml:"auto"},size:20}):i(w,{onClick:l?()=>a(!1):d,disabled:e===-1,sx:{textTransform:"none",ml:"auto"},children:l?"Tutup":"Kunci jawaban"})},s?"loading":"not-loading")})]})},Ml={display:"flex",width:"100%","& > div":{width:["100%","50%"],display:"flex",alignItems:"center",justifyContent:"center"}},Al={display:"flex",flexWrap:"wrap",width:"90%","& > .item":{cursor:"pointer",transition:"all ease .2s",background:"white",width:"50%",p:2,zIndex:1,"&[data-selected='true']":{boxShadow:3,zIndex:2,bgcolor:"primary.main",color:"white"},"&:hover":{bgcolor:"primary.main",color:"white"}}},Tl={text:El,image:ql},Vl=e=>{const t=Tl[e.type];return i(t,g({},e))},Gl=e=>{const t=Ue(),{question:n,image:r,options:a,answer:s}=e,d=kl(e);return i(Zi.Provider,{value:d,children:h(p,{sx:x(g({},Ml),{height:t.height,width:t.width}),children:[i("div",{children:h(p,{sx:{width:"100%",textAlign:"center"},children:[r?i(p,{component:"img",src:r,sx:{maxHeight:256}}):null,i(y,{children:n})]})}),i("div",{children:h(p,{sx:{width:"100%"},children:[h(p,{children:[i(y,{variant:"h5",sx:{mb:2},children:"Pilih jawaban anda :"}),i(p,{sx:Al,children:a.map((l,c)=>i(Vl,g({index:c},l),c))})]}),i(zl,{})]})})]})})},Ll=(e,t)=>t.find("Group").toArray().filter(n=>n.getAttr("id")!==e.getAttr("id"));function Fl(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)}function Ul({stage:e,target:t,swap:n,original:r}){return a=>{const s=a.target,l=Ll(s,e).findIndex(c=>Fl(s.getClientRect(),c.getClientRect()));console.log(l===-1),l!==-1?n(t,l):(console.log("go original"),s.setPosition({x:r.x,y:r.y}))}}function Hl({stage:e,text:t}){return(n,r)=>{if(!e)return[0,0];const a=e.height(),s=e.height()/t.length,l=a/2-s/2,c=e.width(),m=(s+30)*t.length,f=(c-m)/2;return{x:r?r*(s+30)+f:f,y:l,width:s,height:s}}}const pn=u.exports.createContext(null);function er(){return u.exports.useContext(pn)}const Bl=({index:e,text:t})=>{const{stage:n}=dn(),{getNodeState:r,swap:a,mode:s,enableDrag:d}=er(),[l]=r(e),c="/letters/"+t.toLocaleLowerCase()+"0.png",m=Re(),f=u.exports.useRef(null),[v]=Bn(c);u.exports.useEffect(()=>{f.current&&f.current.to({x:l.x,y:l.y,duration:.2})},[f.current,l]);const b=Ul({stage:n.current,target:e,original:l,swap:a});return h(Nn,x(g({},l),{id:l.id,ref:f,onDragEnd:d?b:void 0,draggable:d,children:[i(Rn,{width:l.width,height:l.height,cornerRadius:12,strokeWidth:1,stroke:m.palette.primary.main}),s==="image"?i(Qn,{image:v,height:l.height,width:l.width}):i(On,{fill:"black",fontSize:l.height-10,align:"center",width:l.width,text:t})]}))},Nl=()=>{const{height:e}=Ue(),{text:t,toggleHint:n,toggleMode:r,toggleDrag:a,nodes:s,mode:d,showHint:l,onSubmit:c}=er(),m=window.innerHeight-e,f=je.exports.sortBy(s,"x").map(z=>z.text),v=t===f.join(""),{loading:b,onSubmitHandler:$,submitted:I}=cn({isCorrect:v,onSubmit:c,onSuccess(){a()}});return i(Qe,{elevation:0,variant:"outlined",color:"transparent",sx:{position:"fixed",top:m,width:"100%",height:"fit-content",p:1},children:h(p,{sx:{display:"flex"},children:[h(y,{variant:"h6",children:["Susunlah kata ",`"${t}"`," dengan menggunakan bisindo"]}),i(p,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:i(K,{exitBeforeEnter:!0,children:i(U.div,{exit:{opacity:0},animate:{opacity:1},initial:{opacity:0},children:b?i(S,{children:i(ne,{size:20})}):I?h(S,{children:[h(w,{onClick:r,sx:{textTransform:"none",mr:2},variant:"outlined",children:["Tampilkan ",d==="letter"?"gambar":"huruf"]}),i(w,{onClick:n,sx:{textTransform:"none"},variant:"outlined",children:"Kunci jawaban"})]}):i(w,{onClick:$,sx:{textTransform:"none"},variant:"outlined",children:l?"Jawaban anda":"Kunci jawaban"})},I?"submitted":"not-submitted")})})]})})},tr=e=>{const t=Hn.random.arrayElement(Ki);return je.exports.find(e,t)?tr(e):t},Rl=(e,t,n)=>({id:`rect-${e}-node`,text:t,bg:tr(n)});class Ql extends u.exports.Component{constructor(t){super(t);_(this,"stage");_(this,"layer");_(this,"toggleMode",()=>this.setState(x(g({},this.state),{mode:this.state.mode==="letter"?"image":"letter"})));_(this,"toggleHint",()=>this.setState(x(g({},this.state),{showHint:!this.state.showHint})));_(this,"getNodes",(t=!0)=>{const{text:n}=this.props,r=this.stage.current,a=n.split(" ").join("").split("").filter(c=>c!==" "),s=[],d=[],l=Hl({stage:r,text:a.join("")});return(t?je.exports.shuffle(a):a).forEach((c,m)=>{const f=Rl(m,c,d);s.push(g(g({},f),l("",m))),d.push(f.bg)}),s});_(this,"prepareNodes",()=>{this.setState({nodes:[...this.getNodes()]})});_(this,"getItems",()=>this.state.showHint?this.getNodes(!1):this.state.nodes);_(this,"componentDidMount",()=>{this.prepareNodes()});_(this,"componentDidUpdate",(t,n,r)=>{t.text!==this.props.text&&this.prepareNodes()});_(this,"swap",(t,n)=>{const r=[...this.state.nodes],a=r[t],s=r[n];r[n]=x(g({},s),{y:a.y,x:a.x}),r[t]=x(g({},r[t]),{x:s.x,y:s.y}),this.setState({nodes:[...r]})});_(this,"getNodeState",t=>{const{nodes:n}=this.state,r=a=>{this.state;const s=[...this.state.nodes],d=s[t];s[t]=g(g({},d),a),this.setState({nodes:[...s]})};return[n[t],r]});_(this,"toggleDrag",()=>this.setState({enableDrag:!this.state.enableDrag}));_(this,"getContextValues",()=>({nodes:this.state.nodes,text:this.props.text,swap:this.swap,getNodeState:this.getNodeState,toggleHint:this.toggleHint,toggleMode:this.toggleMode,mode:this.state.mode,showHint:this.state.showHint,enableDrag:this.state.enableDrag,toggleDrag:this.toggleDrag,onSubmit:this.props.onSubmit}));this.state={nodes:[],mode:"image",showHint:!1,enableDrag:!0},this.stage=u.exports.createRef(),this.layer=u.exports.createRef()}render(){return h(pn.Provider,{value:this.getContextValues(),children:[i(Wn,{height:this.props.height,width:window.innerWidth,ref:this.stage,children:i(Jn,{ref:this.layer,children:i(sn.Provider,{value:{stage:this.stage,layer:this.layer},children:i(pn.Provider,{value:this.getContextValues(),children:this.getItems().map((t,n)=>i(Bl,g({index:n},t),t.id))})})})}),i(Nl,{})]})}}const Ol=({text:e,onSubmit:t})=>{const{height:n,width:r}=Ue();return i(Ql,{width:r,height:n,onSubmit:t,text:e})},Wl={LETTER_SEQUENCE:Ol,MULTIPLE_CHOICE:Gl,IMAGE_MATCH:Pl},gn=({type:e,viewerProps:t,onSubmit:n})=>{var a;const r=(a=Wl[e])!=null?a:u.exports.Fragment;return i(r,x(g({},t),{onSubmit:n}))};function mn(e,t){return e==="MULTIPLE_CHOICE"?{question:t.question,answer:t.answer,image:t.additionalFile&&t.additionalFile instanceof File?URL.createObjectURL(t.additionalFile):typeof t.additionalFile=="string"?t.additionalFile:"",options:t.options.map(n=>({content:n.content instanceof File?URL.createObjectURL(n.content):n.content,type:t.type}))}:{text:t.text}}const Jl={answer:0,type:"text",question:"",additionalFile:null},jl=({onSubmit:e,loading:t})=>{const n=re({name:"multipleChoice",defaultValue:Jl}),r=re({name:"text",defaultValue:""}),a=re({name:"multipleChoice.options",defaultValue:[]}),s=Bi(),l={disabled:(()=>{if(s==="MULTIPLE_CHOICE"){const v=a.find(b=>!b.content);return Boolean(v)||!n.question}else return!r})(),sx:{my:2},variant:"outlined"},c=mn(s,x(g({},n),{text:r,options:a})),[m,{inline:f}]=k();return h(S,{children:[i(an,{show:m,handleClose:f,children:i(gn,{type:s,viewerProps:c})}),h(Bt,{sx:{"& > button":{textTransform:"none"}},fullWidth:!0,children:[i(w,x(g({onClick:()=>f(!0)},l),{children:"Tampilkan quis"})),i(w,x(g({},l),{disabled:l.disabled||t,onClick:e,startIcon:t?i(ne,{size:16}):void 0,children:"Simpan"}))]})]})},Kl={LETTER_SEQUENCE:il,IMAGE_MATCH:nl,MULTIPLE_CHOICE:pl},Yl={animate:{y:0,opacity:1},initial:{y:"-200%",opacity:0},exit:{y:"200%",opacity:0}},Xl=()=>{const e=Bi(),t=Kl[e];return i(K,{exitBeforeEnter:!0,children:i(U.div,x(g({},Yl),{children:i(t,{})}),e)})},Zl={LETTER_SEQUENCE:P.mutateLetterSequenceQuiz,IMAGE_MATCH:P.mutateImageMatchQuiz,MULTIPLE_CHOICE:P.mutateMultipleChoiseQuiz},eu=C(e=>{const t=Xd(e),n=Ne();re({control:n.control,defaultValue:V.IMAGE_MATCH,name:"type"});const r=c=>{if("multipleChoice"in c){const m=c,{multipleChoice:f}=m,v=F(m,["multipleChoice"]);return x(g(g({},c),f),{options:c.multipleChoice.options.map(({content:b},$)=>{const I=b instanceof File?"image":"text";return{index:$,[I]:b}})})}return c},[{loading:a,response:s},d]=Me({api:Zl[n.getValues("type")],parser:r,merge:{videoId:e.video.id}}),l=n.handleSubmit(d);return u.exports.useEffect(()=>{s&&e.onSuccess()},[s]),i(Y,x(g({},n),{children:h(Hi.Provider,{value:t,children:[i(jl,{onSubmit:l,loading:a}),h(p,{sx:{display:"flex","& > div":{width:"50%"},overflow:"hidden",minHeight:"70vh"},children:[h("div",{children:[i(tl,{}),i(Xl,{})]}),i("div",{children:i(Zd,{})})]})]})}))}),nr={selected:null,action:null};function tu(){const[e,t]=u.exports.useState(nr),n=a=>()=>t({selected:a,action:"quiz"}),r=a=>()=>t({selected:a,action:"delete"});return x(g({},e),{onDeleteSelected:r,handleSelected:n,handleClose:()=>t(nr)})}const ir=u.exports.createContext(null);function fn(){return u.exports.useContext(ir)}const nu={[V.MULTIPLE_CHOICE]:"Pilihan ganda",[V.IMAGE_MATCH]:"Pencocokan gambar",[V.LETTER_SEQUENCE]:"Pengurutan gambar"},iu=()=>{const{initialFetch:e,result:t,isEmpty:n}=G();u.exports.useEffect(()=>{e()},[]);const{handleSelected:r,onDeleteSelected:a}=fn();return h("div",{children:[n?i(y,{sx:{my:3},align:"center",variant:"h4",children:"Video ini tidak memiliki quis"}):null,i(p,{sx:{display:"flex",flexWrap:"wrap"},children:t.data.map((s,d)=>i(p,{sx:{width:["100%","33.25%"]},children:i(p,{sx:{p:1},children:h(N,{sx:{p:1},children:[h(y,{variant:"caption",children:["Quiz ",d+1]}),h(p,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{variant:"subtitle2",children:nu[s.type]}),h(y,{variant:"subtitle2",children:["Ditampilkan pada : ",s.durationText]})]}),h(Bt,{fullWidth:!0,size:"small",children:[i(w,{onClick:r(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,children:"Simulasi quis"}),i(w,{onClick:a(s),sx:{textTransform:"none"},size:"small",variant:"outlined",fullWidth:!0,color:"error",children:"Hapus"})]})]})})},s.id))})]})},ru=C(()=>i(S,{children:i(iu,{})})),ou=()=>{const{handleSelected:e,selected:t,handleClose:n,action:r}=fn(),a=t?mn(t.type,{text:t.image_matcher,question:t.question,answer:t.questionAnswer,options:t.choises,additionalFile:t.additional_image,type:"text"}):{};return i(an,{show:Boolean(t&&r==="quiz"),handleClose:n,children:t?i(gn,{type:t.type,viewerProps:a}):null})},au=()=>{const{selected:e,action:t,handleClose:n}=fn(),{store:r}=M(),[a,{inline:s}]=k(),{initialFetch:d}=G(),{enqueueSnackbar:l}=B(),c=()=>{e&&(s(!0),r.mutateQuizDelete({id:e.id}).then(()=>{s(!1),d(),l("Quiz berhasil di hapus",{variant:"success"}),n()}))};return h(We,{onClose:n,open:Boolean(e&&t==="delete"),children:[i(lt,{children:i(y,{children:"Apakah anda yakin untuk menghapus ?"})}),h(Ft,{sx:{"& > button":{textTransform:"none"}},children:[i(w,{onClick:n,children:"Batal"}),i(w,{disabled:a,onClick:c,color:"error",children:"Hapus"})]})]})},su=()=>{const e=tu(),{video:t}=rt(),{initialFetch:n}=G(),[r,{toggle:a,force:s}]=k(),{enqueueSnackbar:d}=B(),l=()=>{n(),s(!1)(),d("Quis baru berhasil di tambahkan",{variant:"success"})};return h(ir.Provider,{value:e,children:[h(p,{sx:{minHeight:"110vh"},children:[h(N,{sx:{p:2,m:1},children:[i(w,{sx:{textTransform:"none"},onClick:a,children:r?"Tutup":"Tambah quis baru"}),i(Pe,{in:r,timeout:"auto",mountOnEnter:!0,children:i(eu,{onSuccess:l,video:t})})]}),i(ru,{})]}),i(ou,{}),i(au,{})]})},du=on(()=>{const{video:e}=rt();return k(),i(Ct,{dataKey:"quizByVideo",includes:{videoId:e.id},children:i(su,{})})}),lu=C(()=>{const{form:e,loading:t,handler:n,response:r}=we(),{video:a}=rt(),{enqueueSnackbar:s,closeSnackbar:d}=B(),l=Q();u.exports.useEffect(()=>{r&&(s("Video berhasil di update",{variant:"success"}),l(`/admin/video/${a.id}/info`))},[r]);const[c,{inline:m}]=k();return u.exports.useEffect(()=>{d(),e.setValue("title",a==null?void 0:a.title),e.setValue("caption",a==null?void 0:a.caption),e.setValue("description",a==null?void 0:a.description),m(!0)},[]),c?i(Y,x(g({},e),{children:h(N,{component:"form",onSubmit:n,sx:{p:2,my:3},children:[h(p,{sx:{display:"flex","& > div":{width:"50%",p:1}},children:[i("div",{children:i(A,{fullWidth:!0,name:"title",label:"Judul video"})}),i("div",{children:i(A,{fullWidth:!0,name:"caption",label:"Caption video"})})]}),h(p,{sx:{my:2,p:1},children:[i(Je,{children:"Deskripsi video"}),i(tn,{name:"description"})]}),i(j,{variant:"outlined",fullWidth:!0,icon:i(st,{}),loading:t,children:"Simpan"})]})})):i(S,{})}),uu=e=>(e.description=JSON.stringify(e.description),g({},e)),cu=on(()=>{const{video:e}=rt();return i(Te,{parser:uu,mutateKey:"editVideo",merge:{id:e==null?void 0:e.id},children:i(lu,{})})}),hu=()=>{Yt([]);const{gradeInfo:e}=W();return h(H,{children:[i(Gi,{gradeId:e.studentGrade.grade.id}),";"]})},pu={component:hu,icon:u.exports.Fragment,path:"/discussion",name:"discussion",key:"discussion"};function gu(e){const{progressInfo:{videoHistory:t,quizHistory:n},videoList:{videos:r}}=W(),a=()=>r.find(d=>d.order===e.order-1);return console.log(r),{getIsLocked:()=>{if(e.order===1)return!1;const d=a();if(!d)return!1;const l=t.find(m=>m.video_id.toString()===d.id.toString()),c=n.filter(m=>m.videoId.toString()===d.id.toString());return!l||c.length!==d.quiz_count?!0:l.time<d.duration}}}const mu=C(({model:e,onClick:t,selected:n})=>{Re(),k();const{progressInfo:{getPlaying:r},videoList:{getPlayingPercentage:a}}=W(),s=a(e.id,r(e.id)),{getIsLocked:d}=gu(e),l=d(),{progressInfo:{quizHistory:c}}=W(),m=c.filter(f=>f.videoId.toString()===e.id.toString());return h(ct,{dense:!0,"data-selected":n,sx:{mb:1,transition:"all ease .2s",borderRadius:1,"&:hover":{bgcolor:"primary.light"},"&[data-selected='true']":{bgcolor:"primary.main"},"&:hover, &[data-selected='true']":{boxShadow:2,"& > * > *":{color:"white"}}},onClick:()=>t(e),button:!0,children:[h(ht,{children:[i(le,{when:l,children:i(bn,{})}),h(le,{when:!l,children:[i(le,{when:m.length===e.quiz_count&&s===100,children:i(Gt,{})}),i(le,{when:m.length!==e.quiz_count||s!==100,children:i(En,{})})]})]}),i(pt,{primaryTypographyProps:{sx:{color:"primary.dark",fontWeight:"bolder"}},primary:`${e.order}. ${e.title}`,secondary:`${e.durationText}`})]})}),rr=({width:e="50%",onItemClick:t,exluded:n=[],selected:r})=>{const{videoList:{videos:a}}=W(),s=Q(),d=t||(c=>{s(`/video/${c.id}`)});return i(p,{children:i(gt,{sx:{py:0},children:(()=>a.filter(c=>!(n==null?void 0:n.includes(c.id))))().map(c=>i(mu,{selected:r?r.id===c.id:!1,model:c,onClick:d},c.id))})})},fu=()=>{const{gradeInfo:{studentGrade:e}}=W();return h("div",{children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Kelas / batch"}),i(y,{sx:{fontWeight:"bolder",color:t=>t.palette.grey["700"]},variant:"h5",children:e.grade.name})]})},xu=C(()=>{const{videoList:{videos:e},progressInfo:{videoHistory:t}}=W(),n=e.filter(a=>{const s=t.find(d=>d.video_id.toString()===a.id.toString());return s?s.time>=a.duration:!1}),r=n.length?Math.floor(n.length/e.length*100):0;return h("div",{style:{position:"relative"},children:[h(p,{sx:{display:"flex",justifyContent:"space-between"},children:[i(y,{children:"Progress anda"}),h(y,{children:[n.length," / ",e.length," video"]})]}),h(p,{sx:{flex:1},children:[h(p,{sx:{mb:1,display:"flex",justifyContent:"space-between","& > *":{color:"primary.main"}},children:[i(so,{}),i(lo,{})]}),i(uo,{variant:"determinate",value:r}),i(p,{sx:{width:`${r+1}%`,display:"flex",justifyContent:"flex-end"},children:h("div",{children:[i(co,{sx:{color:"primary.main",display:"block",p:0,m:0}}),h(y,{variant:"caption",children:[r," %"]})]})})]})]})}),yu=()=>(Yt([]),h(H,{sx:{py:2},children:[i(xu,{}),i(T,{}),h(p,{sx:{display:"flex"},children:[i(p,{sx:{width:"30%"},children:i(fu,{})}),h(p,{sx:{width:"70%"},children:[i(y,{variant:"h6",sx:{fontWeight:"lighter"},children:"Video pembelajaran"}),i(rr,{width:"25%"})]})]})]})),vu={path:"/",component:yu,icon:u.exports.Fragment,name:"progress",key:"progress"},_u=()=>(Yt([]),i("div",{children:"video page"})),bu={component:_u,name:"videos",path:"/videos",icon:u.exports.Fragment,key:"videos"},wu=e=>e.content.id.title.thumbnail.caption.quiz_count.quizes(t=>t.id.type.choises(n=>n.id.text.image.index).image_matcher.additional_image.questionAnswer.question.show_at),Cu=e=>{const[t,n]=u.exports.useState(null),r=()=>n(null),a=s=>()=>n(s);return M(s=>s.queryQuizAnswers()),{show:Boolean(t),handleClose:r,handleOpen:a,selected:t}},Su=(e=[],t)=>{const n=u.exports.useRef(null),[r,a]=u.exports.useState(null);k();const{enqueueSnackbar:s}=B();u.exports.useEffect(()=>{r&&(s("Quiz akan segera di mulai"),setTimeout(()=>{var l;console.log("called"),t.handleOpen(r)(),(l=n.current)==null||l.pause()},5e3))},[r]);const d=u.exports.useCallback(l=>{if(!r){const c=e.find(m=>m.show_at-5===Math.floor(l.detail));c&&a(c)}},[e,r]);return u.exports.useEffect(()=>{const l=n.current;if(l)return l.addEventListener("vmCurrentTimeChange",d),()=>{l.removeEventListener("vmCurrentTimeChange",d)}},[n.current]),{playerRef:n}};function Iu(){const e=ut(),{loading:t,data:n}=M(d=>d.queryVideo({id:e.id},wu));ho(e);const r=n&&n.video?n.video.quizes:[],a=Cu();return{videoUtilities:Su(r,a),video:n&&n.video?n.video:null,loading:t,showLoading:!n||!n.video,quiz:a}}function or(e){const{store:t}=M();return async(n,r)=>{const a={videoId:n.id,play:r||e.currentTime};return t.mutateUpdateVideoProgress(a).currentPromise()}}const ar=u.exports.createContext(null);function He(){return u.exports.useContext(ar)}const Pu=C(()=>{const{video:e,videoUtilities:t}=He(),{videoList:{videos:n}}=W(),a=n.findIndex(b=>b.id===(e==null?void 0:e.id))===n.length-1,s=or(t.playerRef.current),[d,{inline:l}]=k(),[c,{inline:m}]=k(),{enqueueSnackbar:f}=B();return h(S,{children:[c?i(Ae,{}):null,h(We,{onClose:()=>l(!1),open:d,fullWidth:!0,children:[i(lt,{children:i(po,{children:a?"Anda telah menyelesaikan semua video pembelajaran pada kelas ini":"Anda telah menyelesaikan video ini, apakah ingin melanjutkan ke video berikutnya ?"})}),h(Ft,{sx:{"& > button":{textTransform:"none"}},children:[i(w,{onClick:()=>l(!1),color:"secondary",startIcon:i(dt,{}),children:"Tutup"}),a?null:i(w,{startIcon:i(go,{}),children:"Ya"})]})]}),i(Ge,{onPlayEnded:()=>{console.log("on onded"),e&&(m(!0),s(e,e.duration).then(()=>{l(!0),m(!1)}).catch(()=>{m(!1),f("Ops terjadi kesalahan",{variant:"error"})}))},playerRef:t.playerRef,url:e.content})]})}),ku=()=>{const{quiz:{show:e,handleClose:t,selected:n},videoUtilities:r}=He(),a=n?mn(n.type,{text:n.image_matcher,question:n.question,answer:n.questionAnswer,options:n.choises,additionalFile:n.additional_image,type:"text"}):{},{store:s}=M(),d=async l=>{if(n)return s.mutateUpdateQuizProgress({quizId:n.id,correct:l}).currentPromise().then(()=>{var m;const c=(m=r.playerRef)==null?void 0:m.current;c&&c.play()})};return i(an,{show:e,handleClose:t,children:n?i(gn,{type:n.type,onSubmit:d,viewerProps:a}):null})},$u=()=>{const{video:e}=He();return i(p,{sx:{mb:1,p:1},children:i(it,{data:e.description})})},sr=({title:e,info:t})=>h(p,{sx:{mb:2},children:[i(y,{sx:{mr:"auto"},children:e}),i(T,{sx:{mb:1}}),i(y,{variant:"h5",sx:{fontWeight:"bolder"},children:t})]}),qu=()=>{const{video:e}=He();return i("div",{children:i(p,{children:h(p,{sx:{py:3,display:"flex"},children:[h(p,{sx:{width:"40%"},children:[i(sr,{title:"Judul video",info:e.title}),i(sr,{title:"Jumlah quis",info:e.quiz_count})]}),i(p,{sx:{width:"60%"},children:i($u,{})})]})})})},Du=C(()=>{const{video:e,quiz:{handleOpen:t}}=He(),{progressInfo:{quizHistory:n}}=W(),r=e.quizes,a=s=>Boolean(n.find(d=>d.id.toString()===s.id.toString()));return h(p,{sx:{pb:2},children:[i(T,{}),r.map((s,d)=>h(w,{disabled:a(s),onClick:t(s),sx:{textTransform:"none"},children:["Quis ",d+1]},s.id)),i(T,{})]})}),Eu=({index:e,history:t,quiz:n})=>{const r=()=>t?t.correct?i(Gt,{}):i(dt,{}):i(S,{});return h(ct,{children:[h(ht,{children:[i(le,{when:!t,children:"-"}),i(le,{when:Boolean(t),children:i(r,{})})]}),i(pt,{secondary:t?t.correct?"Jawaban benar":"Jawaban tidak tepat":"Belum di kerjakan",primary:`Quis ${e+1}`})]})},zu=({history:e,quizes:t})=>i(gt,{children:t.map((n,r)=>i(Eu,{quiz:n,history:e.find(a=>a.id.toString()===n.id.toString()),index:r},n.id))}),Mu=()=>{const{progressInfo:{quizHistory:e}}=W(),{video:t}=He(),[n,{toggle:r}]=k();return h(mo,{onKeyUp:r,keyName:"ctrl+q",children:[i(Pe,{in:n,children:i(Du,{})}),i(zu,{history:e,quizes:t.quizes})]})},Au=[qu,Mu],Tu=C(()=>{const{updateNavs:e}=pe();u.exports.useEffect(()=>{e([])},[]);const t=Iu(),[n,r]=u.exports.useState(0),[a,{inline:s}]=k(),d=Q();or(t.videoUtilities.playerRef.current),W();const l=Au[n];return t.showLoading?i(Ae,{}):h(H,{children:[a?i(Ae,{}):null,h(ar.Provider,{value:t,children:[i(w,{onClick:()=>d("/"),size:"small",variant:"outlined",sx:{my:1},startIcon:i(At,{}),children:"Kembali ke dashboard"}),i(ku,{}),h(p,{sx:{display:["block","flex"]},children:[h(p,{sx:{width:["100%","70%"]},children:[i(Pu,{}),h(Mt,{value:n,onChange:(c,m)=>r(m),children:[i(fe,{value:0,label:"Overview"}),i(fe,{value:1,label:"Quis"}),i(fe,{value:2,label:"Video lainya",sx:{display:["block","none"]}})]}),i(T,{}),i(K,{exitBeforeEnter:!0,children:i(U.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:i(l,{})},n)})]}),i(p,{sx:{width:[0,"30%"]},children:i(p,{sx:{px:1},children:i(rr,{selected:t.video})})})]})]})]})}),Vu={component:Tu,path:"/video/:id",name:"video-student",icon:u.exports.Fragment,key:"video-student"},Gu=!0,Lu=[{path:"classroom/:slug/:id",component:As,groups:[{path:"videos",component:Ks,name:"batch-show-video"},{path:"add-video",component:pd,name:"batch-show-add-vide"},{path:"students",component:Pd,name:"batch-show-student"},{path:"quiz-check",component:Ed,name:"batch-show-quiz-check"},{path:"discussion",component:Jd,name:"batch-show-discussion"}],key:"classroom-show",icon:u.exports.Fragment,name:"classroom show"},{path:"classroom",component:Ms,name:"menagement batch",key:"batch-index",icon:fo},{path:"admin/video/:id",component:Ts,name:"admin-video-page",key:"admin-video-page",icon:u.exports.Fragment,hideInMenu:Gu,groups:[{path:"*",component:Fi,name:"Informasi video"},{path:"info",component:Fi,name:"Informasi video"},{path:"quiz",component:du,name:"Quis"},{path:"edit",component:cu,name:"Edit"}]}],Fu=[{path:"/login",component:rs,name:"login",key:"login",icon:u.exports.Fragment},{path:"/",component:()=>u.exports.createElement(xo,{to:"/login"}),name:"login",key:"login",icon:u.exports.Fragment}],Uu=[vu,bu,pu,Vu],Hu=e=>{if(!e)return"/login";const{role:t}=e;return t===ye.ADMIN?"classroom":"/"},Bu=()=>{const e=r=>r?r.role===ye.ADMIN?Lu:Uu:Fu,t=jt(),n=u.exports.useCallback(async()=>{const r=await t.queryAuth().currentPromise();if(r.auth){const{auth:a}=r;return{id:a.id,name:a.name,email:a.email,role:a.role}}return null},[]);return h(wo,{getRoutes:e,authFunctions:n,children:[i(Ba,{children:i(Ya,{children:i(Co,{getFallback:Hu})})}),i(Va,{})]})},dr=document.getElementById("root");dr&&yo.exports.render(i(vo,{children:i(_o,{anchorOrigin:{horizontal:"right",vertical:"top"},children:i(za,{url:"/graphql",children:i(Bu,{})})})}),dr);
